<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
           "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<title>Coverage Report</title>
<link title="Style" type="text/css" rel="stylesheet" href="css/main.css"/>
<script type="text/javascript" src="js/popup.js"></script>
</head>
<body>
<h5>Coverage Report - com.google.javascript.jscomp.newtypes.ObjectType</h5>
<div class="separator">&nbsp;</div>
<table class="report">
<thead><tr>  <td class="heading">Classes in this File</td>  <td class="heading"><a class="dfn" href="help.html" onclick="popupwindow('help.html'); return false;">Line Coverage</a></td>  <td class="heading"><a class="dfn" href="help.html" onclick="popupwindow('help.html'); return false;">Branch Coverage</a></td>  <td class="heading"><a class="dfn" href="help.html" onclick="popupwindow('help.html'); return false;">Complexity</a></td></tr></thead>
  <tr><td><a href="com.google.javascript.jscomp.newtypes.ObjectType.html">ObjectType</a></td><td><table cellpadding="0px" cellspacing="0px" class="percentgraph"><tr class="percentgraph"><td align="right" class="percentgraph" width="40">94%</td><td class="percentgraph"><div class="percentgraph"><div class="greenbar" style="width:94px"><span class="text">776/818</span></div></div></td></tr></table></td><td><table cellpadding="0px" cellspacing="0px" class="percentgraph"><tr class="percentgraph"><td align="right" class="percentgraph" width="40">88%</td><td class="percentgraph"><div class="percentgraph"><div class="greenbar" style="width:88px"><span class="text">728/818</span></div></div></td></tr></table></td><td class="value"><span class="hidden">6.247311827956989;</span>6.247</td></tr>

</table>
<div class="separator">&nbsp;</div>
<table cellspacing="0" cellpadding="0" class="src">
<tr>  <td class="numLine">&nbsp;1</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">/*</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;2</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> * Copyright 2013 The Closure Compiler Authors.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;3</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> *</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;4</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> * Licensed under the Apache License, Version 2.0 (the "License");</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;5</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> * you may not use this file except in compliance with the License.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;6</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> * You may obtain a copy of the License at</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;7</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> *</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;8</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> *     http://www.apache.org/licenses/LICENSE-2.0</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;9</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> *</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;10</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;11</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> * distributed under the License is distributed on an "AS IS" BASIS,</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;12</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;13</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> * See the License for the specific language governing permissions and</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;14</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> * limitations under the License.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;15</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;16</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;17</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">package</span> com.google.javascript.jscomp.newtypes;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;18</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;19</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">import</span> <span class="keyword">static</span> com.google.common.base.Preconditions.checkArgument;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;20</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">import</span> <span class="keyword">static</span> com.google.common.base.Preconditions.checkNotNull;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;21</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">import</span> <span class="keyword">static</span> com.google.common.base.Preconditions.checkState;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;22</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;23</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">import</span> com.google.common.base.Preconditions;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;24</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">import</span> com.google.common.collect.ImmutableSet;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;25</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">import</span> com.google.common.collect.Iterables;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;26</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">import</span> com.google.common.collect.Multimap;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;27</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">import</span> com.google.common.collect.Sets;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;28</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">import</span> com.google.common.primitives.Ints;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;29</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">import</span> com.google.javascript.jscomp.newtypes.RawNominalType.PropAccess;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;30</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">import</span> com.google.javascript.rhino.Node;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;31</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">import</span> java.util.ArrayList;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;32</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">import</span> java.util.Collection;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;33</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">import</span> java.util.LinkedHashMap;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;34</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">import</span> java.util.LinkedHashSet;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;35</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">import</span> java.util.List;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;36</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">import</span> java.util.Map;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;37</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">import</span> java.util.Objects;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;38</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">import</span> java.util.Set;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;39</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">import</span> java.util.TreeSet;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;40</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">import</span> javax.annotation.Nullable;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;41</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;42</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;43</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> * {@link JSType}s include a possibly-empty set of ObjectType instances,</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;44</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> * representing the non-primitive components of a union type. An ObjectType</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;45</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> * instance includes information about the object: nominal type, function</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;46</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> * signature, and extra properties.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;47</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> *</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;48</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> * @author blickly@google.com (Ben Lickly)</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;49</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> * @author dimvar@google.com (Dimitris Vardoulakis)</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;50</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment"> */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;51</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="keyword">final</span> <span class="keyword">class</span> ObjectType <span class="keyword">implements</span> TypeWithProperties {</pre></td></tr>
<tr>  <td class="numLine">&nbsp;52</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">final</span> NominalType nominalType;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;53</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">// If an ObjectType is a namespace, we record the Namespace object created</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;54</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">// during GTI here.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;55</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">final</span> Namespace ns;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;56</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">final</span> FunctionType fn;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;57</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">boolean</span> isLoose;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;58</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">final</span> PersistentMap&lt;String, Property&gt; props;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;59</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">final</span> ObjectKind objectKind;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;60</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;61</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">final</span> JSTypes commonTypes;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;62</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;63</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/** Creates a new "bottom" object. Should only be called in JSTypes. */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;64</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">static</span> ObjectType createBottomObject(JSTypes commonTypes) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;65</td>  <td class="nbHitsCovered">&nbsp;8682</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">new</span> ObjectType(</pre></td></tr>
<tr>  <td class="numLine">&nbsp;66</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        commonTypes,</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;67</td>  <td class="nbHitsCovered">&nbsp;4341</td>  <td class="src"><pre class="src">&nbsp;        commonTypes.getObjectType(),</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;68</td>  <td class="nbHitsCovered">&nbsp;4341</td>  <td class="src"><pre class="src">&nbsp;        checkNotNull(commonTypes.BOTTOM_PROPERTY_MAP),</pre></td></tr>
<tr>  <td class="numLine">&nbsp;69</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="keyword">null</span>,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;70</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="keyword">null</span>,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;71</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="keyword">false</span>,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;72</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        ObjectKind.UNRESTRICTED);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;73</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;74</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;75</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> ObjectType(JSTypes commonTypes, NominalType nominalType,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;76</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      PersistentMap&lt;String, Property&gt; props, FunctionType fn, Namespace ns,</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;77</td>  <td class="nbHitsCovered">&nbsp;2672290</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">boolean</span> isLoose, ObjectKind objectKind) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;78</td>  <td class="nbHitsCovered">&nbsp;2672290</td>  <td class="src"><pre class="src">&nbsp;    checkNotNull(commonTypes);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;79</td>  <td class="nbHitsCovered">&nbsp;2672290</td>  <td class="src"><pre class="src">&nbsp;    checkNotNull(nominalType);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;80</td>  <td class="nbHitsCovered"><a title="Line 80: Conditional coverage 100% (2/2).">&nbsp;5344580</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 80: Conditional coverage 100% (2/2).">    Preconditions.checkArgument(</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;81</td>  <td class="nbHitsUncovered"><a title="Line 81: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;1954902</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 81: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">        fn == <span class="keyword">null</span> || fn.isQmarkFunction() || fn.isLoose() == isLoose,</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;82</td>  <td class="nbHitsCovered">&nbsp;2672290</td>  <td class="src"><pre class="src">&nbsp;        <span class="string">"isLoose: %s, fn: %s"</span>, isLoose, fn);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;83</td>  <td class="nbHitsCovered">&nbsp;2672290</td>  <td class="src"><pre class="src">&nbsp;    checkArgument(FunctionType.isInhabitable(fn));</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;84</td>  <td class="nbHitsCovered"><a title="Line 84: Conditional coverage 100% (2/2).">&nbsp;2672290</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 84: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (ns != <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;85</td>  <td class="nbHitsCovered">&nbsp;442702</td>  <td class="src"><pre class="src">&nbsp;      String name = nominalType.getName();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;86</td>  <td class="nbHitsCovered"><a title="Line 86: Conditional coverage 100% (2/2).">&nbsp;885404</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 86: Conditional coverage 100% (2/2).">      Preconditions.checkArgument(name.equals(JSTypes.OBJLIT_CLASS_NAME)</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;87</td>  <td class="nbHitsUncovered"><a title="Line 87: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;439970</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 87: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">          || name.equals(<span class="string">"Function"</span>) || name.equals(<span class="string">"Window"</span>),</a></span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;88</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          <span class="string">"Can't create namespace with nominal type %s"</span>, name);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;89</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;90</td>  <td class="nbHitsCovered"><a title="Line 90: Conditional coverage 100% (2/2).">&nbsp;2672290</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 90: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (isLoose) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;91</td>  <td class="nbHitsUncovered"><a title="Line 91: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;200997</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 91: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">      Preconditions.checkArgument(nominalType.isBuiltinObject() || nominalType.isFunction(),</a></span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;92</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          <span class="string">"Cannot create loose objectType with nominal type %s"</span>, nominalType);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;93</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;94</td>  <td class="nbHitsUncovered"><a title="Line 94: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;2672290</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 94: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">    Preconditions.checkArgument(fn == <span class="keyword">null</span> || nominalType.isFunction(),</a></span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;95</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="string">"Cannot create objectType of nominal type %s with function (%s)"</span>,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;96</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        nominalType, fn);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;97</td>  <td class="nbHitsCovered">&nbsp;2672290</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">this</span>.commonTypes = commonTypes;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;98</td>  <td class="nbHitsCovered">&nbsp;2672290</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">this</span>.nominalType = nominalType;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;99</td>  <td class="nbHitsCovered"><a title="Line 99: Conditional coverage 100% (2/2).">&nbsp;2672290</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 99: Conditional coverage 100% (2/2).">    <span class="keyword">this</span>.props = isLoose ? loosenProps(props) : props;</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;100</td>  <td class="nbHitsCovered">&nbsp;2672290</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">this</span>.fn = fn;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;101</td>  <td class="nbHitsCovered">&nbsp;2672290</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">this</span>.ns = ns;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;102</td>  <td class="nbHitsCovered">&nbsp;2672290</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">this</span>.isLoose = isLoose;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;103</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// Don't track @struct-ness/@dict-ness for loose objects</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;104</td>  <td class="nbHitsCovered"><a title="Line 104: Conditional coverage 100% (2/2).">&nbsp;2672290</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 104: Conditional coverage 100% (2/2).">    <span class="keyword">this</span>.objectKind = isLoose ? ObjectKind.UNRESTRICTED : objectKind;</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;105</td>  <td class="nbHitsCovered">&nbsp;2672290</td>  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;106</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;107</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">// Loose object types may have properties that are also loose objects, eg,</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;108</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">//   function f(obj) { obj.a.b.c = 123; }</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;109</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">// This function makes sure we mark these object properties as loose.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;110</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">static</span> PersistentMap&lt;String, Property&gt; loosenProps(</pre></td></tr>
<tr>  <td class="numLine">&nbsp;111</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      PersistentMap&lt;String, Property&gt; props) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;112</td>  <td class="nbHitsCovered">&nbsp;200997</td>  <td class="src"><pre class="src">&nbsp;    PersistentMap&lt;String, Property&gt; newProps = props;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;113</td>  <td class="nbHitsCovered"><a title="Line 113: Conditional coverage 100% (2/2).">&nbsp;200997</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 113: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (Map.Entry&lt;String, Property&gt; entry : props.entrySet()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;114</td>  <td class="nbHitsCovered">&nbsp;196428</td>  <td class="src"><pre class="src">&nbsp;      JSType propType = entry.getValue().getType();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;115</td>  <td class="nbHitsCovered">&nbsp;196428</td>  <td class="src"><pre class="src">&nbsp;      ObjectType objType = propType.getObjTypeIfSingletonObj();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;116</td>  <td class="nbHitsCovered"><a title="Line 116: Conditional coverage 100% (2/2).">&nbsp;196428</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 116: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (objType != <span class="keyword">null</span></a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;117</td>  <td class="nbHitsCovered"><a title="Line 117: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;1515</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 117: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">          &amp;&amp; !objType.nominalType.isClassy() &amp;&amp; !objType.isLoose()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;118</td>  <td class="nbHitsCovered">&nbsp;666</td>  <td class="src"><pre class="src">&nbsp;        newProps = newProps.with(</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;119</td>  <td class="nbHitsCovered">&nbsp;333</td>  <td class="src"><pre class="src">&nbsp;            entry.getKey(),</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;120</td>  <td class="nbHitsCovered">&nbsp;333</td>  <td class="src"><pre class="src">&nbsp;            Property.make(propType.withLoose(), <span class="keyword">null</span>));</pre></td></tr>
<tr>  <td class="numLine">&nbsp;121</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;122</td>  <td class="nbHitsCovered">&nbsp;196428</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;123</td>  <td class="nbHitsCovered">&nbsp;200997</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> newProps;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;124</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;125</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;126</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">static</span> ObjectType makeObjectType(JSTypes commonTypes, NominalType nominalType,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;127</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      PersistentMap&lt;String, Property&gt; props, FunctionType fn, Namespace ns,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;128</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      <span class="keyword">boolean</span> isLoose, ObjectKind ok) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;129</td>  <td class="nbHitsCovered">&nbsp;2615003</td>  <td class="src"><pre class="src">&nbsp;    checkNotNull(nominalType);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;130</td>  <td class="nbHitsCovered"><a title="Line 130: Conditional coverage 100% (2/2).">&nbsp;2615003</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 130: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (props == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;131</td>  <td class="nbHitsCovered">&nbsp;1353363</td>  <td class="src"><pre class="src">&nbsp;      props = PersistentMap.create();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;132</td>  <td class="nbHitsCovered"><a title="Line 132: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;1261640</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 132: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">    } <span class="keyword">else</span> <span class="keyword">if</span> (containsBottomProp(props) || !FunctionType.isInhabitable(fn)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;133</td>  <td class="nbHitsCovered">&nbsp;14</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> commonTypes.getBottomObject();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;134</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;135</td>  <td class="nbHitsCovered"><a title="Line 135: Conditional coverage 100% (6/6) [each condition: 100%, 100%, 100%].">&nbsp;2614989</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 135: Conditional coverage 100% (6/6) [each condition: 100%, 100%, 100%].">    <span class="keyword">if</span> (fn != <span class="keyword">null</span> &amp;&amp; !props.containsKey(<span class="string">"prototype"</span>)</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;136</td>  <td class="nbHitsCovered"><a title="Line 136: Conditional coverage 100% (2/2).">&nbsp;351251</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 136: Conditional coverage 100% (2/2).">        &amp;&amp; (ns == <span class="keyword">null</span> || ns.getNsProp(<span class="string">"prototype"</span>) == <span class="keyword">null</span>)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;137</td>  <td class="nbHitsCovered">&nbsp;903232</td>  <td class="src"><pre class="src">&nbsp;      props = props.with(<span class="string">"prototype"</span>, Property.make(fn.getCommonTypes().UNKNOWN, <span class="keyword">null</span>));</pre></td></tr>
<tr>  <td class="numLine">&nbsp;138</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;139</td>  <td class="nbHitsCovered">&nbsp;2614989</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">new</span> ObjectType(commonTypes, nominalType, props, fn, ns, isLoose, ok);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;140</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;141</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;142</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">static</span> ObjectType fromFunction(FunctionType fn, NominalType fnNominal) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;143</td>  <td class="nbHitsCovered">&nbsp;1719728</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> makeObjectType(fn.getCommonTypes(),</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;144</td>  <td class="nbHitsCovered">&nbsp;859864</td>  <td class="src"><pre class="src">&nbsp;        fnNominal, <span class="keyword">null</span>, fn, <span class="keyword">null</span>, fn.isLoose(), ObjectKind.UNRESTRICTED);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;145</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;146</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;147</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">static</span> ObjectType fromNominalType(NominalType cl) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;148</td>  <td class="nbHitsCovered">&nbsp;343834</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> makeObjectType(cl.getCommonTypes(), cl, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">false</span>, cl.getObjectKind());</pre></td></tr>
<tr>  <td class="numLine">&nbsp;149</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;150</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;151</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/** Construct an object with the given declared properties. */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;152</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">static</span> ObjectType fromProperties(JSTypes commonTypes, Map&lt;String, Property&gt; oldProps) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;153</td>  <td class="nbHitsCovered">&nbsp;9763</td>  <td class="src"><pre class="src">&nbsp;    PersistentMap&lt;String, Property&gt; newProps = PersistentMap.create();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;154</td>  <td class="nbHitsCovered"><a title="Line 154: Conditional coverage 100% (2/2).">&nbsp;9763</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 154: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (Map.Entry&lt;String, Property&gt; entry : oldProps.entrySet()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;155</td>  <td class="nbHitsCovered">&nbsp;9813</td>  <td class="src"><pre class="src">&nbsp;      Property prop = entry.getValue();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;156</td>  <td class="nbHitsUncovered"><a title="Line 156: Conditional coverage 50% (1/2).">&nbsp;9813</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 156: Conditional coverage 50% (1/2).">      <span class="keyword">if</span> (prop.getDeclaredType().isBottom()) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;157</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;        <span class="keyword">return</span> commonTypes.getBottomObject();</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;158</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;159</td>  <td class="nbHitsCovered">&nbsp;9813</td>  <td class="src"><pre class="src">&nbsp;      newProps = newProps.with(entry.getKey(), prop);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;160</td>  <td class="nbHitsCovered">&nbsp;9813</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;161</td>  <td class="nbHitsCovered">&nbsp;9763</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">new</span> ObjectType(commonTypes, commonTypes.getObjectType(), newProps,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;162</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">false</span>, ObjectKind.UNRESTRICTED);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;163</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;164</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;165</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  JSTypes getCommonTypes() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;166</td>  <td class="nbHitsCovered">&nbsp;1565803</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">this</span>.commonTypes;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;167</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;168</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;169</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  @SuppressWarnings(<span class="string">"ReferenceEquality"</span>)</pre></td></tr>
<tr>  <td class="numLine">&nbsp;170</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">boolean</span> isInhabitable() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;171</td>  <td class="nbHitsCovered"><a title="Line 171: Conditional coverage 100% (2/2).">&nbsp;4221954</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 171: Conditional coverage 100% (2/2).">    <span class="keyword">return</span> <span class="keyword">this</span> != <span class="keyword">this</span>.commonTypes.getBottomObject();</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;172</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;173</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;174</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;175</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Returns true if the property map contains bottom. To guarantee</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;176</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * that no non-bottom objects have any bottom-typed properties,</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;177</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * the caller should typically short-circuit a return of the bottom</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;178</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * object if this occurs.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;179</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;180</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> containsBottomProp(PersistentMap&lt;String, Property&gt; props) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;181</td>  <td class="nbHitsCovered"><a title="Line 181: Conditional coverage 100% (2/2).">&nbsp;1261640</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 181: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (Property p : props.values()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;182</td>  <td class="nbHitsCovered"><a title="Line 182: Conditional coverage 100% (2/2).">&nbsp;1097755</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 182: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (p.getType().isBottom()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;183</td>  <td class="nbHitsCovered">&nbsp;3</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;184</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;185</td>  <td class="nbHitsCovered">&nbsp;1097752</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;186</td>  <td class="nbHitsCovered">&nbsp;1261637</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;187</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;188</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;189</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">boolean</span> isStruct() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;190</td>  <td class="nbHitsCovered">&nbsp;9841</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> objectKind.isStruct();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;191</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;192</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;193</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">boolean</span> isLoose() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;194</td>  <td class="nbHitsCovered">&nbsp;788526</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> isLoose;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;195</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;196</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;197</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">boolean</span> isDict() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;198</td>  <td class="nbHitsCovered">&nbsp;27329</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> objectKind.isDict();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;199</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;200</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;201</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">boolean</span> isFunctionWithProperties() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;202</td>  <td class="nbHitsUncovered"><a title="Line 202: Conditional coverage 0% (0/4) [each condition: 0%, 0%].">&nbsp;0</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 202: Conditional coverage 0% (0/4) [each condition: 0%, 0%].">    <span class="keyword">return</span> <span class="keyword">this</span>.fn != <span class="keyword">null</span> &amp;&amp; hasNonPrototypeProperties();</a></span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;203</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;204</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;205</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">boolean</span> isInterfaceInstance() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;206</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;    <span class="keyword">return</span> <span class="keyword">this</span>.nominalType.isInterface();</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;207</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;208</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;209</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">boolean</span> isNamespace() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;210</td>  <td class="nbHitsCovered"><a title="Line 210: Conditional coverage 100% (2/2).">&nbsp;1224395</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 210: Conditional coverage 100% (2/2).">    <span class="keyword">return</span> <span class="keyword">this</span>.ns != <span class="keyword">null</span>;</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;211</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;212</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;213</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">boolean</span> isBuiltinObjectPrototype() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;214</td>  <td class="nbHitsUncovered"><a title="Line 214: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;160101</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 214: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">    <span class="keyword">return</span> <span class="keyword">this</span>.nominalType.isBuiltinObject() &amp;&amp; isPrototypeObject();</a></span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;215</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;216</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;217</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;218</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Returns the prototype of this object type. For Object.prototype it returns null.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;219</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * When Bar extends Foo, the prototype of Bar.prototype is the canonical Foo instance. (This is</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;220</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * accomplished in OTI by using the special type PrototypeObjectType.)</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;221</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * As a result, this method may return a type X for which isPrototypeObject is false, i.e.,</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;222</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * a type that has no owner function.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;223</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;224</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  @Nullable</pre></td></tr>
<tr>  <td class="numLine">&nbsp;225</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  ObjectType getPrototypeObject() {</pre></td></tr>
<tr>  <td class="numLine">&nbsp;226</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    ObjectType proto;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;227</td>  <td class="nbHitsCovered"><a title="Line 227: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;421399</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 227: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">    <span class="keyword">if</span> (isPrototypeObject() &amp;&amp; !isBuiltinObjectPrototype()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;228</td>  <td class="nbHitsCovered">&nbsp;347</td>  <td class="src"><pre class="src">&nbsp;      proto = <span class="keyword">this</span>.nominalType.getInstanceAsObjectType();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;229</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    } <span class="keyword">else</span> {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;230</td>  <td class="nbHitsCovered">&nbsp;421052</td>  <td class="src"><pre class="src">&nbsp;      proto = <span class="keyword">this</span>.nominalType.getPrototypeObject().getObjTypeIfSingletonObj();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;231</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;232</td>  <td class="nbHitsCovered"><a title="Line 232: Conditional coverage 100% (2/2).">&nbsp;421399</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 232: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (<span class="keyword">this</span>.equals(proto)) {</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;233</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      <span class="comment">// In JS's dynamic semantics, the only object without a __proto__ is</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;234</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      <span class="comment">// Object.prototype, but it's not representable in NTI.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;235</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      <span class="comment">// Object.prototype is the only case where we are equal to our own prototype.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;236</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      <span class="comment">// In this case, we should return null.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;237</td>  <td class="nbHitsCovered">&nbsp;108414</td>  <td class="src"><pre class="src">&nbsp;      Preconditions.checkState(</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;238</td>  <td class="nbHitsCovered">&nbsp;54207</td>  <td class="src"><pre class="src">&nbsp;          isBuiltinObjectPrototype(),</pre></td></tr>
<tr>  <td class="numLine">&nbsp;239</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          <span class="string">"Failed to reach Object.prototype in prototype chain, unexpected self-link found at %s"</span>,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;240</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          <span class="keyword">this</span>);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;241</td>  <td class="nbHitsCovered">&nbsp;54207</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">null</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;242</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;243</td>  <td class="nbHitsCovered">&nbsp;367192</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> proto;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;244</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;245</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;246</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">boolean</span> isPrototypeObject() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;247</td>  <td class="nbHitsCovered"><a title="Line 247: Conditional coverage 100% (2/2).">&nbsp;630528</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 247: Conditional coverage 100% (2/2).">    <span class="keyword">return</span> getOwnerFunction() != <span class="keyword">null</span>;</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;248</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;249</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;250</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;251</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * If this a prototype object (e.g. Foo.prototype), this method returns the</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;252</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * associated constructor (e.g. Foo). Otherwise returns null.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;253</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;254</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Note that we don't have a robust way of recognizing prototype objects, so we use a heuristic.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;255</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * It must have the "constructor" property, and the same nominal type as the stored prototype.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;256</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;257</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  FunctionType getOwnerFunction() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;258</td>  <td class="nbHitsCovered">&nbsp;634821</td>  <td class="src"><pre class="src">&nbsp;    JSType t = getProp(<span class="keyword">new</span> QualifiedName(<span class="string">"constructor"</span>));</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;259</td>  <td class="nbHitsUncovered"><a title="Line 259: Conditional coverage 75% (3/4) [each condition: 50%, 100%].">&nbsp;634821</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 259: Conditional coverage 75% (3/4) [each condition: 50%, 100%].">    <span class="keyword">if</span> (t != <span class="keyword">null</span> &amp;&amp; t.isFunctionType()) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;260</td>  <td class="nbHitsCovered">&nbsp;317734</td>  <td class="src"><pre class="src">&nbsp;      FunctionType maybeCtor = t.getFunTypeIfSingletonObj();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;261</td>  <td class="nbHitsCovered"><a title="Line 261: Conditional coverage 100% (2/2).">&nbsp;317734</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 261: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (maybeCtor.isSomeConstructorOrInterface()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;262</td>  <td class="nbHitsCovered">&nbsp;278314</td>  <td class="src"><pre class="src">&nbsp;        JSType proto = maybeCtor.getPrototypeOfNewInstances();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;263</td>  <td class="nbHitsCovered"><a title="Line 263: Conditional coverage 100% (2/2).">&nbsp;278314</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 263: Conditional coverage 100% (2/2).">        <span class="keyword">if</span> (<span class="keyword">this</span>.nominalType.equals(proto.getNominalTypeIfSingletonObj())) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;264</td>  <td class="nbHitsCovered">&nbsp;278304</td>  <td class="src"><pre class="src">&nbsp;          <span class="keyword">return</span> maybeCtor;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;265</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;266</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;267</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;268</td>  <td class="nbHitsCovered">&nbsp;356517</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">null</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;269</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;270</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;271</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">boolean</span> hasNonPrototypeProperties() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;272</td>  <td class="nbHitsCovered"><a title="Line 272: Conditional coverage 100% (2/2).">&nbsp;14701</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 272: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (String pname : <span class="keyword">this</span>.props.keySet()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;273</td>  <td class="nbHitsCovered"><a title="Line 273: Conditional coverage 100% (2/2).">&nbsp;5193</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 273: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (!pname.equals(<span class="string">"prototype"</span>)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;274</td>  <td class="nbHitsCovered">&nbsp;1627</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;275</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;276</td>  <td class="nbHitsCovered">&nbsp;3566</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;277</td>  <td class="nbHitsCovered"><a title="Line 277: Conditional coverage 100% (2/2).">&nbsp;13074</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 277: Conditional coverage 100% (2/2).">    <span class="keyword">return</span> <span class="keyword">this</span>.ns != <span class="keyword">null</span>;</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;278</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;279</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;280</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;281</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Returns true if the properties of obj are a subset of the</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;282</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * properties of someBuiltinObj.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;283</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;284</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> hasOnlyBuiltinProps(ObjectType obj, ObjectType someBuiltinObj) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;285</td>  <td class="nbHitsCovered"><a title="Line 285: Conditional coverage 100% (2/2).">&nbsp;4956</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 285: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (String pname : obj.props.keySet()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;286</td>  <td class="nbHitsCovered"><a title="Line 286: Conditional coverage 100% (2/2).">&nbsp;4984</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 286: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (!someBuiltinObj.mayHaveProp(<span class="keyword">new</span> QualifiedName(pname))) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;287</td>  <td class="nbHitsCovered">&nbsp;4797</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;288</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;289</td>  <td class="nbHitsCovered">&nbsp;187</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;290</td>  <td class="nbHitsCovered">&nbsp;159</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;291</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;292</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;293</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;294</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Applies a crude heuristic to decide whether a loose object is actually a</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;295</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * scalar type (specifically number or string) based on methods that have been</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;296</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * called on it. Does not apply to too-common properties such as toString (and</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;297</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * for this reason it doesn't apply to booleans). Only uses property names,</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;298</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * though it could be changed to use types if precision isn't satisfactory.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;299</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;300</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">static</span> JSType mayTurnLooseObjectToScalar(JSType t, JSTypes commonTypes) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;301</td>  <td class="nbHitsCovered">&nbsp;4153</td>  <td class="src"><pre class="src">&nbsp;    ObjectType obj = t.getObjTypeIfSingletonObj();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;302</td>  <td class="nbHitsUncovered"><a title="Line 302: Conditional coverage 87% (7/8) [each condition: 100%, 50%, 100%, 100%].">&nbsp;4153</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 302: Conditional coverage 87% (7/8) [each condition: 100%, 50%, 100%, 100%].">    <span class="keyword">if</span> (obj == <span class="keyword">null</span> || !obj.isLoose() || obj.props.isEmpty() || obj.fn != <span class="keyword">null</span></a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;303</td>  <td class="nbHitsCovered"><a title="Line 303: Conditional coverage 100% (2/2).">&nbsp;1330</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 303: Conditional coverage 100% (2/2).">        || hasOnlyBuiltinProps(obj, t.getCommonTypes().getTopObjectType())</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;304</td>  <td class="nbHitsCovered"><a title="Line 304: Conditional coverage 100% (2/2).">&nbsp;1262</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 304: Conditional coverage 100% (2/2).">        || hasOnlyBuiltinProps(</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;305</td>  <td class="nbHitsCovered">&nbsp;1262</td>  <td class="src"><pre class="src">&nbsp;            obj, commonTypes.getArrayInstance().getObjTypeIfSingletonObj())) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;306</td>  <td class="nbHitsCovered">&nbsp;2970</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> t;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;307</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;308</td>  <td class="nbHitsCovered"><a title="Line 308: Conditional coverage 100% (2/2).">&nbsp;1183</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 308: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (hasOnlyBuiltinProps(obj, commonTypes.getNumberInstanceObjType())) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;309</td>  <td class="nbHitsCovered">&nbsp;2</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> t.getCommonTypes().NUMBER;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;310</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;311</td>  <td class="nbHitsCovered"><a title="Line 311: Conditional coverage 100% (2/2).">&nbsp;1181</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 311: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (hasOnlyBuiltinProps(obj, commonTypes.getStringInstanceObjType())) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;312</td>  <td class="nbHitsCovered">&nbsp;10</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> t.getCommonTypes().STRING;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;313</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;314</td>  <td class="nbHitsCovered">&nbsp;1171</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> t;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;315</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;316</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;317</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;318</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Returns a "loose" version of this object type.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;319</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;320</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Trade-offs about property behavior on loose object types:</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;321</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * (1) We never mark properties as optional on loose objects. The reason is</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;322</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *     that we cannot know for sure when a property is optional or not</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;323</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *     (e.g, when we see an assignment to a loose object `obj.p1 = 123`,</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;324</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *     we cannot know if obj already has p1, or if this is a property creation).</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;325</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * (2) If the assignment is inside an IF branch, we should not say after the IF</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;326</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *     that p1 is optional. But as a consequence, this means that any property we</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;327</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *     see on a loose object might be optional. That's why we don't warn about</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;328</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *     possibly-inexistent properties on loose objects.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;329</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * (3) Last, say we infer a loose object type with a property p1 for a formal</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;330</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *     parameter of a function f. If we pass a non-loose object to f that does not</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;331</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *     have a p1, we warn. This may create spurious warnings, if p1 is optional,</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;332</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *     but mostly it catches real bugs.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;333</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;334</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  ObjectType withLoose() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;335</td>  <td class="nbHitsCovered"><a title="Line 335: Conditional coverage 100% (2/2).">&nbsp;5524</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 335: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (isTopObject()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;336</td>  <td class="nbHitsCovered">&nbsp;2601</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">this</span>.commonTypes.getLooseTopObjectType();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;337</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;338</td>  <td class="nbHitsCovered"><a title="Line 338: Conditional coverage 100% (2/2).">&nbsp;2923</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 338: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (isLoose()</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;339</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="comment">// Don't loosen nominal types</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;340</td>  <td class="nbHitsCovered"><a title="Line 340: Conditional coverage 100% (6/6) [each condition: 100%, 100%, 100%].">&nbsp;1725</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 340: Conditional coverage 100% (6/6) [each condition: 100%, 100%, 100%].">        || (!<span class="keyword">this</span>.nominalType.isBuiltinObject() &amp;&amp; !<span class="keyword">this</span>.nominalType.isFunction())</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;341</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="comment">// Don't loosen namespaces</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;342</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        || <span class="keyword">this</span>.ns != <span class="keyword">null</span>) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;343</td>  <td class="nbHitsCovered">&nbsp;1639</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">this</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;344</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;345</td>  <td class="nbHitsCovered"><a title="Line 345: Conditional coverage 100% (2/2).">&nbsp;1284</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 345: Conditional coverage 100% (2/2).">    FunctionType fn = <span class="keyword">this</span>.fn == <span class="keyword">null</span> ? <span class="keyword">null</span> : <span class="keyword">this</span>.fn.withLoose();</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;346</td>  <td class="nbHitsCovered">&nbsp;1284</td>  <td class="src"><pre class="src">&nbsp;    PersistentMap&lt;String, Property&gt; newProps = PersistentMap.create();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;347</td>  <td class="nbHitsCovered"><a title="Line 347: Conditional coverage 100% (2/2).">&nbsp;1284</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 347: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (Map.Entry&lt;String, Property&gt; propsEntry : <span class="keyword">this</span>.props.entrySet()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;348</td>  <td class="nbHitsCovered">&nbsp;1348</td>  <td class="src"><pre class="src">&nbsp;      String pname = propsEntry.getKey();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;349</td>  <td class="nbHitsCovered">&nbsp;1348</td>  <td class="src"><pre class="src">&nbsp;      Property prop = propsEntry.getValue();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;350</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      <span class="comment">// It's wrong to warn about a possibly absent property on loose objects.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;351</td>  <td class="nbHitsCovered">&nbsp;1348</td>  <td class="src"><pre class="src">&nbsp;      newProps = newProps.with(pname, prop.withRequired());</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;352</td>  <td class="nbHitsCovered">&nbsp;1348</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;353</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// No need to call makeObjectType; we know that the new object is inhabitable.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;354</td>  <td class="nbHitsCovered">&nbsp;1284</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">new</span> ObjectType(</pre></td></tr>
<tr>  <td class="numLine">&nbsp;355</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="keyword">this</span>.commonTypes, <span class="keyword">this</span>.nominalType, newProps, fn, <span class="keyword">null</span>, <span class="keyword">true</span>, <span class="keyword">this</span>.objectKind);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;356</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;357</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;358</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;359</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Returns a version of this object with the given function signature.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;360</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * This only makes sense if (1) this is a namespace, and (2) the function</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;361</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * is not loose (with the exception of the question-mark function).</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;362</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;363</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  ObjectType withFunction(FunctionType ft, NominalType fnNominal) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;364</td>  <td class="nbHitsCovered">&nbsp;285818</td>  <td class="src"><pre class="src">&nbsp;    checkState(<span class="keyword">this</span>.isNamespace());</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;365</td>  <td class="nbHitsUncovered"><a title="Line 365: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;285818</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 365: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">    checkState(!ft.isLoose() || ft.isQmarkFunction());</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;366</td>  <td class="nbHitsCovered">&nbsp;285818</td>  <td class="src"><pre class="src">&nbsp;    ObjectType obj = makeObjectType(</pre></td></tr>
<tr>  <td class="numLine">&nbsp;367</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="keyword">this</span>.commonTypes, fnNominal, <span class="keyword">this</span>.props, ft, <span class="keyword">this</span>.ns, <span class="keyword">false</span>, <span class="keyword">this</span>.objectKind);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;368</td>  <td class="nbHitsCovered">&nbsp;285818</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">this</span>.ns.updateNamespaceType(JSType.fromObjectType(obj));</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;369</td>  <td class="nbHitsCovered">&nbsp;285818</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> obj;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;370</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;371</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;372</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/** Returns a transformed set of object types without the given property. */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;373</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">static</span> ImmutableSet&lt;ObjectType&gt; withoutProperty(Set&lt;ObjectType&gt; objs, QualifiedName qname) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;374</td>  <td class="nbHitsCovered">&nbsp;353</td>  <td class="src"><pre class="src">&nbsp;    ImmutableSet.Builder&lt;ObjectType&gt; newObjs = ImmutableSet.builder();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;375</td>  <td class="nbHitsCovered"><a title="Line 375: Conditional coverage 100% (2/2).">&nbsp;353</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 375: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (ObjectType obj : objs) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;376</td>  <td class="nbHitsCovered">&nbsp;354</td>  <td class="src"><pre class="src">&nbsp;      newObjs.add(obj.withProperty(qname, <span class="keyword">null</span>));</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;377</td>  <td class="nbHitsCovered">&nbsp;354</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;378</td>  <td class="nbHitsCovered">&nbsp;353</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> newObjs.build();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;379</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;380</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;381</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;382</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Helper method to return a new object with the property added, updated,</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;383</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * or removed. If the type is null, the property is removed. Declared</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;384</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * and constant are "one-way" switches: a declared property will not be</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;385</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * made un-declared, nor a const property made non-constant. If a</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;386</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * property is already inferred with the correct type, it will not be</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;387</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * explicitly added.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;388</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;389</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  @SuppressWarnings(<span class="string">"ReferenceEquality"</span>)</pre></td></tr>
<tr>  <td class="numLine">&nbsp;390</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> ObjectType withPropertyHelper(QualifiedName qname, JSType type,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;391</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      <span class="keyword">boolean</span> isDeclared, <span class="keyword">boolean</span> isConstant) {</pre></td></tr>
<tr>  <td class="numLine">&nbsp;392</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// TODO(dimvar): We do some short-circuiting based on the declared type,</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;393</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// but maybe we can do more based also on the existing inferred type (?)</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;394</td>  <td class="nbHitsCovered">&nbsp;35121</td>  <td class="src"><pre class="src">&nbsp;    PersistentMap&lt;String, Property&gt; newProps = <span class="keyword">this</span>.props;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;395</td>  <td class="nbHitsCovered"><a title="Line 395: Conditional coverage 100% (2/2).">&nbsp;35121</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 395: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (qname.isIdentifier()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;396</td>  <td class="nbHitsCovered">&nbsp;34429</td>  <td class="src"><pre class="src">&nbsp;      String pname = qname.getLeftmostName();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;397</td>  <td class="nbHitsCovered">&nbsp;34429</td>  <td class="src"><pre class="src">&nbsp;      JSType declType = getDeclaredProp(qname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;398</td>  <td class="nbHitsCovered"><a title="Line 398: Conditional coverage 100% (2/2).">&nbsp;34429</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 398: Conditional coverage 100% (2/2).">      JSType inferred = hasProp(qname) ? getProp(qname) : <span class="keyword">null</span>;</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;399</td>  <td class="nbHitsCovered"><a title="Line 399: Conditional coverage 100% (2/2).">&nbsp;34429</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 399: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (type == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;400</td>  <td class="nbHitsCovered">&nbsp;266</td>  <td class="src"><pre class="src">&nbsp;        type = declType;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;401</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;402</td>  <td class="nbHitsCovered"><a title="Line 402: Conditional coverage 100% (2/2).">&nbsp;34429</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 402: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (declType != <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;403</td>  <td class="nbHitsCovered">&nbsp;2757</td>  <td class="src"><pre class="src">&nbsp;        isDeclared = <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;404</td>  <td class="nbHitsCovered"><a title="Line 404: Conditional coverage 100% (2/2).">&nbsp;2757</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 404: Conditional coverage 100% (2/2).">        <span class="keyword">if</span> (hasConstantProp(qname)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;405</td>  <td class="nbHitsCovered">&nbsp;276</td>  <td class="src"><pre class="src">&nbsp;          isConstant = <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;406</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;407</td>  <td class="nbHitsUncovered"><a title="Line 407: Conditional coverage 75% (3/4) [each condition: 50%, 100%].">&nbsp;2757</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 407: Conditional coverage 75% (3/4) [each condition: 50%, 100%].">        <span class="keyword">if</span> (type != <span class="keyword">null</span> &amp;&amp; !type.isSubtypeOf(declType, SubtypeCache.create())) {</a></span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;408</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          <span class="comment">// Can happen in inheritance-related type errors.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;409</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          <span class="comment">// Not sure what the best approach is.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;410</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          <span class="comment">// For now, just forget the inferred type.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;411</td>  <td class="nbHitsCovered">&nbsp;90</td>  <td class="src"><pre class="src">&nbsp;          type = declType;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;412</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;413</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;414</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;415</td>  <td class="nbHitsCovered"><a title="Line 415: Conditional coverage 100% (2/2).">&nbsp;34429</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 415: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (type == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;416</td>  <td class="nbHitsCovered">&nbsp;208</td>  <td class="src"><pre class="src">&nbsp;        newProps = newProps.without(pname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;417</td>  <td class="nbHitsCovered"><a title="Line 417: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;34221</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 417: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">      } <span class="keyword">else</span> <span class="keyword">if</span> (!type.equals(declType) &amp;&amp; !type.equals(inferred)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;418</td>  <td class="nbHitsCovered"><a title="Line 418: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;31789</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 418: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">        <span class="keyword">if</span> (isDeclared &amp;&amp; declType == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;419</td>  <td class="nbHitsCovered">&nbsp;129</td>  <td class="src"><pre class="src">&nbsp;          declType = type;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;420</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;421</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="comment">// If we're about to override an existing property, then preserve its defsite.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;422</td>  <td class="nbHitsCovered">&nbsp;31789</td>  <td class="src"><pre class="src">&nbsp;        Node defsite = <span class="keyword">null</span>;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;423</td>  <td class="nbHitsCovered"><a title="Line 423: Conditional coverage 100% (2/2).">&nbsp;31789</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 423: Conditional coverage 100% (2/2).">        <span class="keyword">if</span> (hasProp(qname)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;424</td>  <td class="nbHitsCovered">&nbsp;1688</td>  <td class="src"><pre class="src">&nbsp;          defsite = getLeftmostProp(qname).getDefSite();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;425</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;426</td>  <td class="nbHitsCovered"><a title="Line 426: Conditional coverage 100% (2/2).">&nbsp;63578</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 426: Conditional coverage 100% (2/2).">        newProps = newProps.with(pname,</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;427</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;            isConstant ?</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;428</td>  <td class="nbHitsCovered"><a title="Line 428: Conditional coverage 100% (2/2).">&nbsp;226</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 428: Conditional coverage 100% (2/2).">            Property.makeConstant(defsite, type, declType) :</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;429</td>  <td class="nbHitsCovered">&nbsp;31563</td>  <td class="src"><pre class="src">&nbsp;            Property.makeWithDefsite(defsite, type, isDeclared ? declType : <span class="keyword">null</span>));</pre></td></tr>
<tr>  <td class="numLine">&nbsp;430</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;431</td>  <td class="nbHitsCovered">&nbsp;34429</td>  <td class="src"><pre class="src">&nbsp;    } <span class="keyword">else</span> { <span class="comment">// This has a nested object</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;432</td>  <td class="nbHitsCovered">&nbsp;692</td>  <td class="src"><pre class="src">&nbsp;      String objName = qname.getLeftmostName();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;433</td>  <td class="nbHitsCovered">&nbsp;692</td>  <td class="src"><pre class="src">&nbsp;      QualifiedName objQname = <span class="keyword">new</span> QualifiedName(objName);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;434</td>  <td class="nbHitsUncovered"><a title="Line 434: Conditional coverage 50% (1/2).">&nbsp;692</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 434: Conditional coverage 50% (1/2).">      <span class="keyword">if</span> (!mayHaveProp(objQname)) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;435</td>  <td class="nbHitsUncovered"><a title="Line 435: Conditional coverage 0% (0/2).">&nbsp;0</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 435: Conditional coverage 0% (0/2).">        Preconditions.checkState(type == <span class="keyword">null</span>,</a></span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;436</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;            <span class="string">"Trying to update property %s on type %s, but sub-property %s does"</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;437</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;            + <span class="string">" not exist"</span>, qname, <span class="keyword">this</span>, objName);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;438</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;        <span class="keyword">return</span> <span class="keyword">this</span>;</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;439</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;440</td>  <td class="nbHitsCovered">&nbsp;692</td>  <td class="src"><pre class="src">&nbsp;      QualifiedName innerProps = qname.getAllButLeftmost();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;441</td>  <td class="nbHitsCovered">&nbsp;692</td>  <td class="src"><pre class="src">&nbsp;      Property objProp = getLeftmostProp(objQname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;442</td>  <td class="nbHitsCovered"><a title="Line 442: Conditional coverage 100% (2/2).">&nbsp;692</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 442: Conditional coverage 100% (2/2).">      JSType inferred = type == <span class="keyword">null</span> ?</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;443</td>  <td class="nbHitsCovered">&nbsp;88</td>  <td class="src"><pre class="src">&nbsp;          objProp.getType().withoutProperty(innerProps) :</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;444</td>  <td class="nbHitsCovered">&nbsp;604</td>  <td class="src"><pre class="src">&nbsp;          objProp.getType().withProperty(innerProps, type);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;445</td>  <td class="nbHitsCovered">&nbsp;692</td>  <td class="src"><pre class="src">&nbsp;      JSType declared = objProp.getDeclaredType();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;446</td>  <td class="nbHitsCovered"><a title="Line 446: Conditional coverage 100% (2/2).">&nbsp;692</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 446: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (!inferred.equals(declared)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;447</td>  <td class="nbHitsUncovered"><a title="Line 447: Conditional coverage 50% (1/2).">&nbsp;906</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 447: Conditional coverage 50% (1/2).">        newProps = newProps.with(objName, objProp.isOptional() ?</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;448</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;            Property.makeOptional(<span class="keyword">null</span>, inferred, declared) :</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;449</td>  <td class="nbHitsCovered">&nbsp;453</td>  <td class="src"><pre class="src">&nbsp;            Property.make(inferred, declared));</pre></td></tr>
<tr>  <td class="numLine">&nbsp;450</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;451</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;452</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// check for ref equality to avoid creating a new type</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;453</td>  <td class="nbHitsCovered"><a title="Line 453: Conditional coverage 100% (2/2).">&nbsp;35121</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 453: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (newProps == <span class="keyword">this</span>.props) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;454</td>  <td class="nbHitsCovered">&nbsp;2671</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">this</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;455</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;456</td>  <td class="nbHitsCovered">&nbsp;32450</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> makeObjectType(<span class="keyword">this</span>.commonTypes, <span class="keyword">this</span>.nominalType, newProps,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;457</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="keyword">this</span>.fn, <span class="keyword">this</span>.ns, <span class="keyword">this</span>.isLoose, <span class="keyword">this</span>.objectKind);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;458</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;459</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;460</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;461</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Returns a new object type with the given property added or</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;462</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * (if type is null) removed.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;463</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;464</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  ObjectType withProperty(QualifiedName qname, JSType type) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;465</td>  <td class="nbHitsCovered">&nbsp;34992</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> withPropertyHelper(qname, type, <span class="keyword">false</span>, <span class="keyword">false</span>);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;466</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;467</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;468</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;469</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Returns a new object type with the given declared property added.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;470</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Passing null for the type will mark an inferred property as</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;471</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * declared, rather than removing it.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;472</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;473</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  ObjectType withDeclaredProperty(QualifiedName qname, JSType type, <span class="keyword">boolean</span> isConstant) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;474</td>  <td class="nbHitsCovered">&nbsp;129</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> withPropertyHelper(qname, type, <span class="keyword">true</span>, isConstant);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;475</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;476</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;477</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;478</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Returns a new object type with the named property marked as required.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;479</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * If the property is not present, it will be typed as unknown.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;480</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;481</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  ObjectType withPropertyRequired(String pname) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;482</td>  <td class="nbHitsCovered">&nbsp;6</td>  <td class="src"><pre class="src">&nbsp;    Property oldProp = <span class="keyword">this</span>.props.get(pname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;483</td>  <td class="nbHitsUncovered"><a title="Line 483: Conditional coverage 50% (1/2).">&nbsp;6</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 483: Conditional coverage 50% (1/2).">    Property newProp = oldProp == <span class="keyword">null</span></a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;484</td>  <td class="nbHitsCovered">&nbsp;6</td>  <td class="src"><pre class="src">&nbsp;        ? Property.make(<span class="keyword">this</span>.commonTypes.UNKNOWN, <span class="keyword">null</span>)</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;485</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;        : Property.make(oldProp.getType(), oldProp.getDeclaredType());</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;486</td>  <td class="nbHitsCovered">&nbsp;6</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> makeObjectType(<span class="keyword">this</span>.commonTypes, <span class="keyword">this</span>.nominalType, <span class="keyword">this</span>.props.with(pname, newProp),</pre></td></tr>
<tr>  <td class="numLine">&nbsp;487</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="keyword">this</span>.fn, <span class="keyword">this</span>.ns, <span class="keyword">this</span>.isLoose, <span class="keyword">this</span>.objectKind);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;488</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;489</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;490</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;491</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Meets the given property maps. The returned map will be a union of</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;492</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * the input maps (since the set of properties is contravariant). When</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;493</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * a property is present in both, the result will be either the meet</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;494</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * of the two types, or if specializeProps1 is given, it will be the</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;495</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * type from props1 specialized by the type from props2. The</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;496</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * resultNominalType should be the nominal type that belongs with the</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;497</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * returned property map (i.e. of the met or specialized type).</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;498</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;499</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">static</span> PersistentMap&lt;String, Property&gt; meetPropsHelper(</pre></td></tr>
<tr>  <td class="numLine">&nbsp;500</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      JSTypes commonTypes,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;501</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      <span class="keyword">boolean</span> specializeProps1, NominalType resultNominalType,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;502</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      PersistentMap&lt;String, Property&gt; props1,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;503</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      PersistentMap&lt;String, Property&gt; props2) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;504</td>  <td class="nbHitsCovered">&nbsp;41814</td>  <td class="src"><pre class="src">&nbsp;    checkNotNull(resultNominalType);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;505</td>  <td class="nbHitsCovered">&nbsp;41814</td>  <td class="src"><pre class="src">&nbsp;    PersistentMap&lt;String, Property&gt; newProps = props1;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;506</td>  <td class="nbHitsCovered"><a title="Line 506: Conditional coverage 100% (2/2).">&nbsp;41814</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 506: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (Map.Entry&lt;String, Property&gt; propsEntry : props1.entrySet()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;507</td>  <td class="nbHitsCovered">&nbsp;23882</td>  <td class="src"><pre class="src">&nbsp;      String pname = propsEntry.getKey();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;508</td>  <td class="nbHitsCovered">&nbsp;23882</td>  <td class="src"><pre class="src">&nbsp;      Property otherProp = resultNominalType.getProp(pname, PropAccess.INCLUDE_STRAY_PROPS);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;509</td>  <td class="nbHitsCovered"><a title="Line 509: Conditional coverage 100% (2/2).">&nbsp;23882</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 509: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (otherProp != <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;510</td>  <td class="nbHitsCovered">&nbsp;1730</td>  <td class="src"><pre class="src">&nbsp;        newProps = addOrRemoveProp(</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;511</td>  <td class="nbHitsCovered">&nbsp;865</td>  <td class="src"><pre class="src">&nbsp;            specializeProps1, newProps, pname, otherProp, propsEntry.getValue());</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;512</td>  <td class="nbHitsUncovered"><a title="Line 512: Conditional coverage 50% (1/2).">&nbsp;865</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 512: Conditional coverage 50% (1/2).">        <span class="keyword">if</span> (commonTypes.isBottomPropertyMap(newProps)) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;513</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;          <span class="keyword">return</span> commonTypes.BOTTOM_PROPERTY_MAP;</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;514</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;515</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;516</td>  <td class="nbHitsCovered">&nbsp;23882</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;517</td>  <td class="nbHitsCovered"><a title="Line 517: Conditional coverage 100% (2/2).">&nbsp;41814</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 517: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (Map.Entry&lt;String, Property&gt; propsEntry : props2.entrySet()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;518</td>  <td class="nbHitsCovered">&nbsp;22839</td>  <td class="src"><pre class="src">&nbsp;      String pname = propsEntry.getKey();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;519</td>  <td class="nbHitsCovered">&nbsp;22839</td>  <td class="src"><pre class="src">&nbsp;      Property prop2 = propsEntry.getValue();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;520</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      Property newProp;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;521</td>  <td class="nbHitsCovered"><a title="Line 521: Conditional coverage 100% (2/2).">&nbsp;22839</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 521: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (!props1.containsKey(pname)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;522</td>  <td class="nbHitsCovered">&nbsp;1922</td>  <td class="src"><pre class="src">&nbsp;        newProp = prop2;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;523</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      } <span class="keyword">else</span> {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;524</td>  <td class="nbHitsCovered">&nbsp;20917</td>  <td class="src"><pre class="src">&nbsp;        Property prop1 = props1.get(pname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;525</td>  <td class="nbHitsCovered"><a title="Line 525: Conditional coverage 100% (2/2).">&nbsp;20917</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 525: Conditional coverage 100% (2/2).">        <span class="keyword">if</span> (prop1.equals(prop2)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;526</td>  <td class="nbHitsCovered">&nbsp;20187</td>  <td class="src"><pre class="src">&nbsp;          <span class="keyword">continue</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;527</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;528</td>  <td class="nbHitsCovered"><a title="Line 528: Conditional coverage 100% (2/2).">&nbsp;730</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 528: Conditional coverage 100% (2/2).">        newProp = specializeProps1 ?</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;529</td>  <td class="nbHitsCovered">&nbsp;719</td>  <td class="src"><pre class="src">&nbsp;            prop1.specialize(prop2) :</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;530</td>  <td class="nbHitsCovered">&nbsp;11</td>  <td class="src"><pre class="src">&nbsp;            Property.meet(prop1, prop2);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;531</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;532</td>  <td class="nbHitsCovered">&nbsp;2652</td>  <td class="src"><pre class="src">&nbsp;      Property otherProp = resultNominalType.getProp(pname, PropAccess.INCLUDE_STRAY_PROPS);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;533</td>  <td class="nbHitsCovered"><a title="Line 533: Conditional coverage 100% (2/2).">&nbsp;2652</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 533: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (otherProp != <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;534</td>  <td class="nbHitsCovered">&nbsp;1695</td>  <td class="src"><pre class="src">&nbsp;        newProps = addOrRemoveProp(specializeProps1, newProps, pname, otherProp, newProp);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;535</td>  <td class="nbHitsCovered"><a title="Line 535: Conditional coverage 100% (2/2).">&nbsp;1695</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 535: Conditional coverage 100% (2/2).">        <span class="keyword">if</span> (commonTypes.isBottomPropertyMap(newProps)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;536</td>  <td class="nbHitsCovered">&nbsp;7</td>  <td class="src"><pre class="src">&nbsp;          <span class="keyword">return</span> commonTypes.BOTTOM_PROPERTY_MAP;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;537</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;538</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      } <span class="keyword">else</span> {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;539</td>  <td class="nbHitsCovered"><a title="Line 539: Conditional coverage 100% (2/2).">&nbsp;957</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 539: Conditional coverage 100% (2/2).">        <span class="keyword">if</span> (newProp.getType().isBottom()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;540</td>  <td class="nbHitsCovered">&nbsp;3</td>  <td class="src"><pre class="src">&nbsp;          <span class="keyword">return</span> commonTypes.BOTTOM_PROPERTY_MAP;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;541</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;542</td>  <td class="nbHitsCovered">&nbsp;954</td>  <td class="src"><pre class="src">&nbsp;        newProps = newProps.with(pname, newProp);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;543</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;544</td>  <td class="nbHitsCovered">&nbsp;2642</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;545</td>  <td class="nbHitsCovered">&nbsp;41804</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> newProps;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;546</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;547</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;548</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;549</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Utility method used by meetPropsHelper. Adds the property if the result</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;550</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * type is a known proper subtype of the nominal type's property, otherwise</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;551</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * removes (since there is nothing new beyond what's already stored in the</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;552</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * nominal type). Returns bottom map if the result type would be bottom.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;553</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;554</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">static</span> PersistentMap&lt;String, Property&gt; addOrRemoveProp(</pre></td></tr>
<tr>  <td class="numLine">&nbsp;555</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      <span class="keyword">boolean</span> specializeProps1, PersistentMap&lt;String, Property&gt; props,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;556</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      String pname, Property nomProp, Property objProp) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;557</td>  <td class="nbHitsCovered">&nbsp;2560</td>  <td class="src"><pre class="src">&nbsp;    JSType nomPropType = nomProp.getType();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;558</td>  <td class="nbHitsCovered"><a title="Line 558: Conditional coverage 100% (2/2).">&nbsp;2560</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 558: Conditional coverage 100% (2/2).">    Property newProp = specializeProps1</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;559</td>  <td class="nbHitsCovered">&nbsp;2522</td>  <td class="src"><pre class="src">&nbsp;        ? nomProp.specialize(objProp)</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;560</td>  <td class="nbHitsCovered">&nbsp;38</td>  <td class="src"><pre class="src">&nbsp;        : Property.meet(nomProp, objProp);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;561</td>  <td class="nbHitsCovered">&nbsp;2560</td>  <td class="src"><pre class="src">&nbsp;    JSType newPropType = newProp.getType();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;562</td>  <td class="nbHitsCovered"><a title="Line 562: Conditional coverage 100% (2/2).">&nbsp;2560</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 562: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (newPropType.isBottom()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;563</td>  <td class="nbHitsCovered">&nbsp;7</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> newPropType.getCommonTypes().BOTTOM_PROPERTY_MAP;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;564</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;565</td>  <td class="nbHitsCovered"><a title="Line 565: Conditional coverage 100% (2/2).">&nbsp;2553</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 565: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (!newPropType.isUnknown()</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;566</td>  <td class="nbHitsUncovered"><a title="Line 566: Conditional coverage 50% (1/2).">&nbsp;2324</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 566: Conditional coverage 50% (1/2).">        &amp;&amp; newPropType.isSubtypeOf(nomPropType, SubtypeCache.create())</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;567</td>  <td class="nbHitsCovered"><a title="Line 567: Conditional coverage 100% (2/2).">&nbsp;2324</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 567: Conditional coverage 100% (2/2).">        &amp;&amp; !newPropType.equals(nomPropType)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;568</td>  <td class="nbHitsCovered">&nbsp;565</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> props.with(pname, newProp);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;569</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;570</td>  <td class="nbHitsCovered">&nbsp;1988</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> props.without(pname);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;571</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;572</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;573</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;574</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Looks up the property in the property map, falling back on the given nominal type</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;575</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * if it's not in the map.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;576</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Called only when joining two ObjectTypes; that's why it does not deal with namespaces.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;577</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * @see #join</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;578</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;579</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">static</span> Property getProp(Map&lt;String, Property&gt; props, NominalType nom, String pname) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;580</td>  <td class="nbHitsCovered"><a title="Line 580: Conditional coverage 100% (2/2).">&nbsp;1468</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 580: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (props.containsKey(pname)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;581</td>  <td class="nbHitsCovered">&nbsp;1156</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> props.get(pname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;582</td>  <td class="nbHitsUncovered"><a title="Line 582: Conditional coverage 50% (1/2).">&nbsp;312</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 582: Conditional coverage 50% (1/2).">    } <span class="keyword">else</span> <span class="keyword">if</span> (nom != <span class="keyword">null</span>) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;583</td>  <td class="nbHitsCovered">&nbsp;312</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> nom.getProp(pname, PropAccess.INCLUDE_STRAY_PROPS);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;584</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;585</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;    <span class="keyword">return</span> <span class="keyword">null</span>;</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;586</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;587</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;588</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;589</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Joins two property maps. The nominal types are required because otherwise</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;590</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * a property may become optional by mistake after the join. This is not</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;591</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * necessary for {@link #joinPropsLoosely}, because we don't create optional</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;592</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * props on loose types.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;593</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;594</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">static</span> PersistentMap&lt;String, Property&gt; joinProps(</pre></td></tr>
<tr>  <td class="numLine">&nbsp;595</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      Map&lt;String, Property&gt; props1, Map&lt;String, Property&gt; props2,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;596</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      NominalType nom1, NominalType nom2) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;597</td>  <td class="nbHitsCovered">&nbsp;739</td>  <td class="src"><pre class="src">&nbsp;    PersistentMap&lt;String, Property&gt; newProps = PersistentMap.create();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;598</td>  <td class="nbHitsCovered"><a title="Line 598: Conditional coverage 100% (2/2).">&nbsp;739</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 598: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (String pname : Sets.union(props1.keySet(), props2.keySet())) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;599</td>  <td class="nbHitsCovered">&nbsp;734</td>  <td class="src"><pre class="src">&nbsp;      Property prop1 = getProp(props1, nom1, pname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;600</td>  <td class="nbHitsCovered">&nbsp;734</td>  <td class="src"><pre class="src">&nbsp;      Property prop2 = getProp(props2, nom2, pname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;601</td>  <td class="nbHitsCovered">&nbsp;734</td>  <td class="src"><pre class="src">&nbsp;      Property newProp = <span class="keyword">null</span>;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;602</td>  <td class="nbHitsCovered"><a title="Line 602: Conditional coverage 100% (2/2).">&nbsp;734</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 602: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (prop1 == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;603</td>  <td class="nbHitsCovered">&nbsp;43</td>  <td class="src"><pre class="src">&nbsp;        newProp = prop2.withOptional();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;604</td>  <td class="nbHitsCovered"><a title="Line 604: Conditional coverage 100% (2/2).">&nbsp;691</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 604: Conditional coverage 100% (2/2).">      } <span class="keyword">else</span> <span class="keyword">if</span> (prop2 == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;605</td>  <td class="nbHitsCovered">&nbsp;190</td>  <td class="src"><pre class="src">&nbsp;        newProp = prop1.withOptional();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;606</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      } <span class="keyword">else</span> {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;607</td>  <td class="nbHitsCovered">&nbsp;501</td>  <td class="src"><pre class="src">&nbsp;        newProp = Property.join(prop1, prop2);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;608</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;609</td>  <td class="nbHitsCovered">&nbsp;734</td>  <td class="src"><pre class="src">&nbsp;      newProps = newProps.with(pname, newProp);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;610</td>  <td class="nbHitsCovered">&nbsp;734</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;611</td>  <td class="nbHitsCovered">&nbsp;739</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> newProps;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;612</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;613</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;614</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;615</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Loosely joins two property maps. Properties are marked as required because there</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;616</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * is no concept of optional properties on loose types. @see #withLoose.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;617</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;618</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">static</span> PersistentMap&lt;String, Property&gt; joinPropsLoosely(</pre></td></tr>
<tr>  <td class="numLine">&nbsp;619</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      Map&lt;String, Property&gt; props1, Map&lt;String, Property&gt; props2) {</pre></td></tr>
<tr>  <td class="numLine">&nbsp;620</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// Note: If ever newProps == BOTTOM_PROPERTY_MAP, it could be returned early,</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;621</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// but as long as it only ever comes from with(), that is impossible. We may</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;622</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// want to bail out early if either props1 or props2 is bottom.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;623</td>  <td class="nbHitsCovered">&nbsp;193</td>  <td class="src"><pre class="src">&nbsp;    PersistentMap&lt;String, Property&gt; newProps = PersistentMap.create();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;624</td>  <td class="nbHitsCovered"><a title="Line 624: Conditional coverage 100% (2/2).">&nbsp;193</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 624: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (Map.Entry&lt;String, Property&gt; propsEntry : props1.entrySet()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;625</td>  <td class="nbHitsCovered">&nbsp;206</td>  <td class="src"><pre class="src">&nbsp;      String pname = propsEntry.getKey();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;626</td>  <td class="nbHitsCovered"><a title="Line 626: Conditional coverage 100% (2/2).">&nbsp;206</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 626: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (!props2.containsKey(pname)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;627</td>  <td class="nbHitsCovered">&nbsp;72</td>  <td class="src"><pre class="src">&nbsp;        newProps = newProps.with(pname, propsEntry.getValue().withRequired());</pre></td></tr>
<tr>  <td class="numLine">&nbsp;628</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;629</td>  <td class="nbHitsCovered">&nbsp;206</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;630</td>  <td class="nbHitsCovered"><a title="Line 630: Conditional coverage 100% (2/2).">&nbsp;193</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 630: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (Map.Entry&lt;String, Property&gt; propsEntry : props2.entrySet()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;631</td>  <td class="nbHitsCovered">&nbsp;197</td>  <td class="src"><pre class="src">&nbsp;      String pname = propsEntry.getKey();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;632</td>  <td class="nbHitsCovered">&nbsp;197</td>  <td class="src"><pre class="src">&nbsp;      Property prop2 = propsEntry.getValue();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;633</td>  <td class="nbHitsCovered"><a title="Line 633: Conditional coverage 100% (2/2).">&nbsp;197</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 633: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (props1.containsKey(pname)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;634</td>  <td class="nbHitsCovered">&nbsp;268</td>  <td class="src"><pre class="src">&nbsp;        newProps = newProps.with(pname,</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;635</td>  <td class="nbHitsCovered">&nbsp;134</td>  <td class="src"><pre class="src">&nbsp;            Property.join(props1.get(pname), prop2).withRequired());</pre></td></tr>
<tr>  <td class="numLine">&nbsp;636</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      } <span class="keyword">else</span> {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;637</td>  <td class="nbHitsCovered">&nbsp;63</td>  <td class="src"><pre class="src">&nbsp;        newProps = newProps.with(pname, prop2.withRequired());</pre></td></tr>
<tr>  <td class="numLine">&nbsp;638</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;639</td>  <td class="nbHitsCovered">&nbsp;197</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;640</td>  <td class="nbHitsCovered">&nbsp;193</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> newProps;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;641</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;642</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;643</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;644</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Returns true if the union objs1 is a subtype of the union objs2.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;645</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * This means that every member of objs1 has at least one supertype</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;646</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * in objs2. If keepLoosenessOfThis is false, the looseness of</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;647</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * members of objs1 will be disregarded.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;648</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;649</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">static</span> <span class="keyword">boolean</span> isUnionSubtype(<span class="keyword">boolean</span> keepLoosenessOfThis,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;650</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      Set&lt;ObjectType&gt; objs1, Set&lt;ObjectType&gt; objs2, SubtypeCache subSuperMap) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;651</td>  <td class="nbHitsCovered">&nbsp;339514</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> isUnionSubtypeHelper(keepLoosenessOfThis, objs1, objs2, subSuperMap, <span class="keyword">null</span>);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;652</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;653</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;654</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;655</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Fills boxedInfo (a single-element "output" array) with the reason</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;656</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * why objs1 is not a subtype of objs2, for the purpose of building</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;657</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * informative error messages.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;658</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * @throws IllegalArgumentException if objs1 actually is a subtype of objs2.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;659</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;660</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">static</span> <span class="keyword">void</span> whyNotUnionSubtypes(<span class="keyword">boolean</span> keepLoosenessOfThis,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;661</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      Set&lt;ObjectType&gt; objs1, Set&lt;ObjectType&gt; objs2, SubtypeCache subSuperMap,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;662</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      MismatchInfo[] boxedInfo) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;663</td>  <td class="nbHitsUncovered"><a title="Line 663: Conditional coverage 50% (1/2).">&nbsp;12</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 663: Conditional coverage 50% (1/2).">    checkArgument(boxedInfo.length == 1);</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;664</td>  <td class="nbHitsCovered">&nbsp;12</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">boolean</span> areSubtypes = isUnionSubtypeHelper(</pre></td></tr>
<tr>  <td class="numLine">&nbsp;665</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        keepLoosenessOfThis, objs1, objs2, subSuperMap, boxedInfo);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;666</td>  <td class="nbHitsUncovered"><a title="Line 666: Conditional coverage 50% (1/2).">&nbsp;12</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 666: Conditional coverage 50% (1/2).">    checkArgument(!areSubtypes);</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;667</td>  <td class="nbHitsCovered">&nbsp;12</td>  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;668</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;669</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> isUnionSubtypeHelper(<span class="keyword">boolean</span> keepLoosenessOfThis,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;670</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      Set&lt;ObjectType&gt; objs1, Set&lt;ObjectType&gt; objs2, SubtypeCache subSuperMap,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;671</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      MismatchInfo[] boxedInfo) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;672</td>  <td class="nbHitsCovered"><a title="Line 672: Conditional coverage 100% (2/2).">&nbsp;339526</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 672: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (ObjectType obj1 : objs1) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;673</td>  <td class="nbHitsCovered">&nbsp;339838</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">boolean</span> foundSupertype = <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;674</td>  <td class="nbHitsCovered"><a title="Line 674: Conditional coverage 100% (2/2).">&nbsp;339838</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 674: Conditional coverage 100% (2/2).">      <span class="keyword">for</span> (ObjectType obj2 : objs2) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;675</td>  <td class="nbHitsCovered"><a title="Line 675: Conditional coverage 100% (2/2).">&nbsp;340212</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 675: Conditional coverage 100% (2/2).">        <span class="keyword">if</span> (obj1.isSubtypeOfHelper(keepLoosenessOfThis, obj2, subSuperMap, <span class="keyword">null</span>)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;676</td>  <td class="nbHitsCovered">&nbsp;333313</td>  <td class="src"><pre class="src">&nbsp;          foundSupertype = <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;677</td>  <td class="nbHitsCovered">&nbsp;333313</td>  <td class="src"><pre class="src">&nbsp;          <span class="keyword">break</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;678</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;679</td>  <td class="nbHitsCovered">&nbsp;6899</td>  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;680</td>  <td class="nbHitsCovered"><a title="Line 680: Conditional coverage 100% (2/2).">&nbsp;339838</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 680: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (!foundSupertype) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;681</td>  <td class="nbHitsCovered"><a title="Line 681: Conditional coverage 100% (2/2).">&nbsp;6525</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 681: Conditional coverage 100% (2/2).">        <span class="keyword">if</span> (boxedInfo != <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;682</td>  <td class="nbHitsCovered">&nbsp;12</td>  <td class="src"><pre class="src">&nbsp;          boxedInfo[0] =</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;683</td>  <td class="nbHitsCovered">&nbsp;12</td>  <td class="src"><pre class="src">&nbsp;              MismatchInfo.makeUnionTypeMismatch(JSType.fromObjectType(obj1));</pre></td></tr>
<tr>  <td class="numLine">&nbsp;684</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;685</td>  <td class="nbHitsCovered">&nbsp;6525</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;686</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;687</td>  <td class="nbHitsCovered">&nbsp;333313</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;688</td>  <td class="nbHitsCovered">&nbsp;333001</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;689</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;690</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;691</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/** Returns true if this is a subtype of obj2. */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;692</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">boolean</span> isSubtypeOf(ObjectType obj2, SubtypeCache subSuperMap) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;693</td>  <td class="nbHitsCovered">&nbsp;283</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> isSubtypeOfHelper(<span class="keyword">true</span>, obj2, subSuperMap, <span class="keyword">null</span>);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;694</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;695</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;696</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;697</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Fills boxedInfo (a single-element "output" array) with the reason</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;698</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * why obj1 is not a subtype of obj2, for the purpose of building</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;699</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * informative error messages.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;700</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * @throws IllegalArgumentException if obj1 actually is a subtype of obj2.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;701</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;702</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">static</span> <span class="keyword">void</span> whyNotSubtypeOf(ObjectType obj1, ObjectType obj2, MismatchInfo[] boxedInfo) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;703</td>  <td class="nbHitsUncovered"><a title="Line 703: Conditional coverage 50% (1/2).">&nbsp;134</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 703: Conditional coverage 50% (1/2).">    checkArgument(boxedInfo.length == 1);</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;704</td>  <td class="nbHitsCovered">&nbsp;134</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">boolean</span> areSubtypes = obj1.isSubtypeOfHelper(<span class="keyword">true</span>, obj2, SubtypeCache.create(), boxedInfo);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;705</td>  <td class="nbHitsUncovered"><a title="Line 705: Conditional coverage 50% (1/2).">&nbsp;134</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 705: Conditional coverage 50% (1/2).">    Preconditions.checkState(!areSubtypes, <span class="string">"Type %s shouldn't be a subtype of %s"</span>, obj1, obj2);</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;706</td>  <td class="nbHitsCovered">&nbsp;134</td>  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;707</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;708</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;709</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Required properties are acceptable where an optional is required,</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;710</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * but not vice versa.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;711</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Optional properties create cycles in the type lattice, eg,</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;712</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *    { }  { p: num= }   and also   { p: num= }  { }.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;713</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;714</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">boolean</span> isSubtypeOfHelper(<span class="keyword">boolean</span> keepLoosenessOfThis,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;715</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      ObjectType other, SubtypeCache subSuperMap, MismatchInfo[] boxedInfo) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;716</td>  <td class="nbHitsCovered"><a title="Line 716: Conditional coverage 100% (2/2).">&nbsp;340629</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 716: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (other.isTopObject()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;717</td>  <td class="nbHitsCovered">&nbsp;277309</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;718</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;719</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;720</td>  <td class="nbHitsCovered"><a title="Line 720: Conditional coverage 100% (6/6) [each condition: 100%, 100%, 100%].">&nbsp;63320</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 720: Conditional coverage 100% (6/6) [each condition: 100%, 100%, 100%].">    <span class="keyword">if</span> ((keepLoosenessOfThis &amp;&amp; <span class="keyword">this</span>.isLoose) || other.isLoose) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;721</td>  <td class="nbHitsCovered">&nbsp;5065</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">this</span>.isLooseSubtypeOf(other, subSuperMap);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;722</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;723</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;724</td>  <td class="nbHitsCovered">&nbsp;58255</td>  <td class="src"><pre class="src">&nbsp;    NominalType thisNt = <span class="keyword">this</span>.nominalType;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;725</td>  <td class="nbHitsCovered">&nbsp;58255</td>  <td class="src"><pre class="src">&nbsp;    NominalType otherNt = other.nominalType;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;726</td>  <td class="nbHitsCovered">&nbsp;58255</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">boolean</span> checkOnlyLocalProps = <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;727</td>  <td class="nbHitsCovered"><a title="Line 727: Conditional coverage 100% (2/2).">&nbsp;58255</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 727: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (otherNt.isStructuralInterface()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;728</td>  <td class="nbHitsCovered"><a title="Line 728: Conditional coverage 100% (2/2).">&nbsp;5228</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 728: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (otherNt.equals(subSuperMap.get(thisNt))) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;729</td>  <td class="nbHitsCovered">&nbsp;107</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;730</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;731</td>  <td class="nbHitsCovered">&nbsp;5121</td>  <td class="src"><pre class="src">&nbsp;      subSuperMap = subSuperMap.with(thisNt, otherNt);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;732</td>  <td class="nbHitsCovered"><a title="Line 732: Conditional coverage 100% (2/2).">&nbsp;5121</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 732: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (!thisNt.isNominalSubtypeOf(otherNt)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;733</td>  <td class="nbHitsCovered">&nbsp;543</td>  <td class="src"><pre class="src">&nbsp;        checkOnlyLocalProps = <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;734</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;735</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      <span class="comment">// IObject and IArrayLike are treated specially;</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;736</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      <span class="comment">// unlike other structural types, we check that the generics match.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;737</td>  <td class="nbHitsCovered"><a title="Line 737: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;5121</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 737: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">      <span class="keyword">if</span> (thisNt.inheritsFromIObjectReflexive() &amp;&amp; otherNt.inheritsFromIObjectReflexive()</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;738</td>  <td class="nbHitsCovered"><a title="Line 738: Conditional coverage 100% (2/2).">&nbsp;325</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 738: Conditional coverage 100% (2/2).">          &amp;&amp; !thisNt.isIObjectSubtypeOf(otherNt)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;739</td>  <td class="nbHitsCovered">&nbsp;31</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;740</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;741</td>  <td class="nbHitsCovered"><a title="Line 741: Conditional coverage 100% (6/6) [each condition: 100%, 100%, 100%].">&nbsp;5090</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 741: Conditional coverage 100% (6/6) [each condition: 100%, 100%, 100%].">      <span class="keyword">if</span> ((thisNt.isBuiltinObject() || thisNt.isLiteralObject()) &amp;&amp; otherNt.isIObject()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;742</td>  <td class="nbHitsCovered">&nbsp;97</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> compareRecordTypeToIObject(otherNt, subSuperMap);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;743</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;744</td>  <td class="nbHitsCovered"><a title="Line 744: Conditional coverage 100% (2/2).">&nbsp;53027</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 744: Conditional coverage 100% (2/2).">    } <span class="keyword">else</span> <span class="keyword">if</span> (!thisNt.isNominalSubtypeOf(otherNt)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;745</td>  <td class="nbHitsCovered">&nbsp;1513</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;746</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;747</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;748</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// If nominalType1 &lt; nominalType2, we only need to check that the</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;749</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// properties of other are in (obj1 or nominalType1)</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;750</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    Set&lt;String&gt; otherPropNames;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;751</td>  <td class="nbHitsCovered"><a title="Line 751: Conditional coverage 100% (2/2).">&nbsp;56507</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 751: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (checkOnlyLocalProps) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;752</td>  <td class="nbHitsCovered">&nbsp;56085</td>  <td class="src"><pre class="src">&nbsp;      otherPropNames = other.props.keySet();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;753</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    } <span class="keyword">else</span> {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;754</td>  <td class="nbHitsCovered">&nbsp;422</td>  <td class="src"><pre class="src">&nbsp;      otherPropNames = otherNt.getPropertyNames();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;755</td>  <td class="nbHitsCovered"><a title="Line 755: Conditional coverage 100% (2/2).">&nbsp;422</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 755: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (otherPropNames == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;756</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="comment">// Can't check structural interfaces for subtyping during GlobalTypeInfo</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;757</td>  <td class="nbHitsCovered">&nbsp;5</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;758</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;759</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;760</td>  <td class="nbHitsCovered"><a title="Line 760: Conditional coverage 100% (2/2).">&nbsp;56502</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 760: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (!arePropertiesSubtypes(other, otherPropNames, subSuperMap, boxedInfo)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;761</td>  <td class="nbHitsCovered">&nbsp;1394</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;762</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;763</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;764</td>  <td class="nbHitsCovered"><a title="Line 764: Conditional coverage 100% (2/2).">&nbsp;55108</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 764: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (other.fn == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;765</td>  <td class="nbHitsCovered">&nbsp;17647</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;766</td>  <td class="nbHitsUncovered"><a title="Line 766: Conditional coverage 50% (1/2).">&nbsp;37461</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 766: Conditional coverage 50% (1/2).">    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.fn == <span class="keyword">null</span>) {</a></span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;767</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      <span class="comment">// Can only be executed if we have declared types for callable objects.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;768</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;      <span class="keyword">return</span> <span class="keyword">false</span>;</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;769</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;770</td>  <td class="nbHitsCovered">&nbsp;37461</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">boolean</span> areFunsSubtypes = <span class="keyword">this</span>.fn.isSubtypeOf(other.fn, subSuperMap);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;771</td>  <td class="nbHitsCovered"><a title="Line 771: Conditional coverage 100% (2/2).">&nbsp;37461</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 771: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (boxedInfo != <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;772</td>  <td class="nbHitsCovered">&nbsp;29</td>  <td class="src"><pre class="src">&nbsp;      FunctionType.whyNotSubtypeOf(<span class="keyword">this</span>.fn, other.fn, subSuperMap, boxedInfo);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;773</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;774</td>  <td class="nbHitsCovered">&nbsp;37461</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> areFunsSubtypes;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;775</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;776</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;777</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;778</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Special case of isSubtypeOf for testing a builtin or literal object as a</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;779</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * subtype of IObjectKEY, VALUE. Specifically, checks that all properties</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;780</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * have the correct key and value type.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;781</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;782</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * NOTE(dimvar): it's not ideal that the unquoted properties of the</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;783</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * object literal are checked as part of the IObject type. We want</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;784</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * a property to either always be accessed with dot or with brackets,</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;785</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * and checking the unquoted properties against IObject gives the</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;786</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * impression that we support both kinds of accesses for the same</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;787</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * property. The alternatives are (none is very satisfactory):</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;788</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * (1) Don't check any object-literal properties against IObject</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;789</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * (2) Check all object-literal properties against IObject (what we're currently doing)</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;790</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * (3) Check only the quoted object-literal properties against IObject.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;791</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *     This is not great because NTI also checks quoted properties individually</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;792</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *     if the name is known.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;793</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * (4) Remember in the property map whether a property name was declared as</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;794</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *     quoted or not. This will likely involve a lot of extra plumbing.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;795</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;796</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * NOTE(sdh): if the index of the IObject is a string enum, we can do extra checking in this</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;797</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * method; we can check that the record type's properties match the enum keys. Useful or overkill?</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;798</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;799</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">boolean</span> compareRecordTypeToIObject(NominalType otherNt, SubtypeCache subSuperMap) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;800</td>  <td class="nbHitsCovered">&nbsp;97</td>  <td class="src"><pre class="src">&nbsp;    JSType keyType = otherNt.getIndexType();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;801</td>  <td class="nbHitsCovered"><a title="Line 801: Conditional coverage 100% (6/6) [each condition: 100%, 100%, 100%].">&nbsp;97</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 801: Conditional coverage 100% (6/6) [each condition: 100%, 100%, 100%].">    <span class="keyword">if</span> (!keyType.isNumber() &amp;&amp; !keyType.isString() &amp;&amp; !keyType.isUnknown()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;802</td>  <td class="nbHitsCovered">&nbsp;2</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">this</span>.props.isEmpty();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;803</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;804</td>  <td class="nbHitsCovered">&nbsp;95</td>  <td class="src"><pre class="src">&nbsp;    JSType valueType = otherNt.getIndexedType();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;805</td>  <td class="nbHitsCovered"><a title="Line 805: Conditional coverage 100% (2/2).">&nbsp;95</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 805: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (Map.Entry&lt;String, Property&gt; entry : <span class="keyword">this</span>.props.entrySet()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;806</td>  <td class="nbHitsCovered">&nbsp;76</td>  <td class="src"><pre class="src">&nbsp;      String pname = entry.getKey();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;807</td>  <td class="nbHitsCovered">&nbsp;76</td>  <td class="src"><pre class="src">&nbsp;      JSType ptype = entry.getValue().getType();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;808</td>  <td class="nbHitsCovered"><a title="Line 808: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;76</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 808: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">      <span class="keyword">if</span> (keyType.isNumber() &amp;&amp; Ints.tryParse(pname) == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;809</td>  <td class="nbHitsCovered">&nbsp;2</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;810</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;811</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      <span class="comment">// Bracket accesses on the IObject (or on an Array) can generally return undefined</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;812</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      <span class="comment">// and we don't warn about that; so ignore undefined for the object literal as well.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;813</td>  <td class="nbHitsCovered"><a title="Line 813: Conditional coverage 100% (2/2).">&nbsp;74</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 813: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (!ptype.removeType(<span class="keyword">this</span>.commonTypes.UNDEFINED).isSubtypeOf(valueType, subSuperMap)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;814</td>  <td class="nbHitsCovered">&nbsp;6</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;815</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;816</td>  <td class="nbHitsCovered">&nbsp;68</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;817</td>  <td class="nbHitsCovered">&nbsp;87</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;818</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;819</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;820</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;821</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Iterates over the specified properties of the other object and tests that</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;822</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * all corresponding properties in this object are subtypes of other's</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;823</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * properties. Fills in boxedInfo if non-null.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;824</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;825</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">boolean</span> arePropertiesSubtypes(ObjectType other,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;826</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      Set&lt;String&gt; otherPropNames, SubtypeCache subSuperMap,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;827</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      MismatchInfo[] boxedInfo) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;828</td>  <td class="nbHitsCovered"><a title="Line 828: Conditional coverage 100% (2/2).">&nbsp;56502</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 828: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (String pname : otherPropNames) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;829</td>  <td class="nbHitsCovered">&nbsp;49839</td>  <td class="src"><pre class="src">&nbsp;      QualifiedName qname = <span class="keyword">new</span> QualifiedName(pname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;830</td>  <td class="nbHitsCovered"><a title="Line 830: Conditional coverage 100% (2/2).">&nbsp;99678</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 830: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (!isPropertySubtype(</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;831</td>  <td class="nbHitsCovered">&nbsp;49839</td>  <td class="src"><pre class="src">&nbsp;          pname, <span class="keyword">this</span>.getLeftmostProp(qname), other.getLeftmostProp(qname),</pre></td></tr>
<tr>  <td class="numLine">&nbsp;832</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          subSuperMap, boxedInfo)) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;833</td>  <td class="nbHitsCovered">&nbsp;1387</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;834</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;835</td>  <td class="nbHitsCovered">&nbsp;48452</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;836</td>  <td class="nbHitsCovered"><a title="Line 836: Conditional coverage 100% (2/2).">&nbsp;55115</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 836: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (other.ns != <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;837</td>  <td class="nbHitsCovered"><a title="Line 837: Conditional coverage 100% (2/2).">&nbsp;5091</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 837: Conditional coverage 100% (2/2).">      <span class="keyword">for</span> (String pname : other.ns.getAllPropsOfNamespace()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;838</td>  <td class="nbHitsUncovered"><a title="Line 838: Conditional coverage 50% (1/2).">&nbsp;137</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 838: Conditional coverage 50% (1/2).">        <span class="keyword">if</span> (!otherPropNames.contains(pname)) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;839</td>  <td class="nbHitsCovered">&nbsp;137</td>  <td class="src"><pre class="src">&nbsp;          QualifiedName qname = <span class="keyword">new</span> QualifiedName(pname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;840</td>  <td class="nbHitsCovered"><a title="Line 840: Conditional coverage 100% (2/2).">&nbsp;274</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 840: Conditional coverage 100% (2/2).">          <span class="keyword">if</span> (!isPropertySubtype(</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;841</td>  <td class="nbHitsCovered">&nbsp;137</td>  <td class="src"><pre class="src">&nbsp;              pname, <span class="keyword">this</span>.getLeftmostProp(qname), other.getLeftmostProp(qname),</pre></td></tr>
<tr>  <td class="numLine">&nbsp;842</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;              subSuperMap, boxedInfo)) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;843</td>  <td class="nbHitsCovered">&nbsp;7</td>  <td class="src"><pre class="src">&nbsp;            <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;844</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;845</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;846</td>  <td class="nbHitsCovered">&nbsp;130</td>  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;847</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;848</td>  <td class="nbHitsCovered">&nbsp;55108</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;849</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;850</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;851</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;852</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Returns true if prop1 (which may be null, representing an absent property)</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;853</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * is a subtype of prop2. Fills in boxedInfo if non-null.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;854</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;855</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> isPropertySubtype(String pname, Property prop1,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;856</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      Property prop2, SubtypeCache subSuperMap, MismatchInfo[] boxedInfo) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;857</td>  <td class="nbHitsCovered"><a title="Line 857: Conditional coverage 100% (2/2).">&nbsp;99952</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 857: Conditional coverage 100% (2/2).">    <span class="keyword">return</span> boxedInfo != <span class="keyword">null</span></a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;858</td>  <td class="nbHitsCovered">&nbsp;118</td>  <td class="src"><pre class="src">&nbsp;        ? getPropMismatchInfo(pname, prop1, prop2, subSuperMap, boxedInfo)</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;859</td>  <td class="nbHitsCovered">&nbsp;49858</td>  <td class="src"><pre class="src">&nbsp;        : isPropertySubtypeHelper(prop1, prop2, subSuperMap);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;860</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;861</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;862</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> isPropertySubtypeHelper(</pre></td></tr>
<tr>  <td class="numLine">&nbsp;863</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      Property prop1, Property prop2, SubtypeCache subSuperMap) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;864</td>  <td class="nbHitsCovered"><a title="Line 864: Conditional coverage 100% (2/2).">&nbsp;49858</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 864: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (prop2.isOptional()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;865</td>  <td class="nbHitsCovered"><a title="Line 865: Conditional coverage 100% (2/2).">&nbsp;75</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 865: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (prop1 != <span class="keyword">null</span></a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;866</td>  <td class="nbHitsCovered"><a title="Line 866: Conditional coverage 100% (2/2).">&nbsp;46</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 866: Conditional coverage 100% (2/2).">          &amp;&amp; !prop1.getType().isSubtypeOf(prop2.getType(), subSuperMap)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;867</td>  <td class="nbHitsCovered">&nbsp;11</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;868</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;869</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    } <span class="keyword">else</span> {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;870</td>  <td class="nbHitsCovered"><a title="Line 870: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;49783</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 870: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">      <span class="keyword">if</span> (prop1 == <span class="keyword">null</span> || prop1.isOptional() ||</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;871</td>  <td class="nbHitsCovered"><a title="Line 871: Conditional coverage 100% (2/2).">&nbsp;49006</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 871: Conditional coverage 100% (2/2).">          !prop1.getType().isSubtypeOf(prop2.getType(), subSuperMap)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;872</td>  <td class="nbHitsCovered">&nbsp;1346</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;873</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;874</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;875</td>  <td class="nbHitsCovered">&nbsp;48501</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;876</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;877</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;878</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">// Like isPropertySubtypeHelper, but also provides mismatch information</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;879</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> getPropMismatchInfo(String pname, Property prop1,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;880</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      Property prop2, SubtypeCache subSuperMap, MismatchInfo[] boxedInfo) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;881</td>  <td class="nbHitsCovered">&nbsp;118</td>  <td class="src"><pre class="src">&nbsp;    checkNotNull(pname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;882</td>  <td class="nbHitsCovered"><a title="Line 882: Conditional coverage 100% (2/2).">&nbsp;118</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 882: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (prop2.isOptional()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;883</td>  <td class="nbHitsUncovered"><a title="Line 883: Conditional coverage 50% (1/2).">&nbsp;5</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 883: Conditional coverage 50% (1/2).">      <span class="keyword">if</span> (prop1 != <span class="keyword">null</span></a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;884</td>  <td class="nbHitsCovered"><a title="Line 884: Conditional coverage 100% (2/2).">&nbsp;5</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 884: Conditional coverage 100% (2/2).">          &amp;&amp; !prop1.getType().isSubtypeOf(prop2.getType(), subSuperMap)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;885</td>  <td class="nbHitsCovered">&nbsp;8</td>  <td class="src"><pre class="src">&nbsp;        boxedInfo[0] = MismatchInfo.makePropTypeMismatch(</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;886</td>  <td class="nbHitsCovered">&nbsp;4</td>  <td class="src"><pre class="src">&nbsp;            pname, prop2.getType(), prop1.getType());</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;887</td>  <td class="nbHitsCovered">&nbsp;4</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;888</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;889</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    } <span class="keyword">else</span> {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;890</td>  <td class="nbHitsCovered"><a title="Line 890: Conditional coverage 100% (2/2).">&nbsp;113</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 890: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (prop1 == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;891</td>  <td class="nbHitsCovered">&nbsp;15</td>  <td class="src"><pre class="src">&nbsp;        boxedInfo[0] = MismatchInfo.makeMissingPropMismatch(pname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;892</td>  <td class="nbHitsCovered">&nbsp;15</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;893</td>  <td class="nbHitsCovered"><a title="Line 893: Conditional coverage 100% (2/2).">&nbsp;98</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 893: Conditional coverage 100% (2/2).">      } <span class="keyword">else</span> <span class="keyword">if</span> (prop1.isOptional()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;894</td>  <td class="nbHitsCovered">&nbsp;2</td>  <td class="src"><pre class="src">&nbsp;        boxedInfo[0] = MismatchInfo.makeMaybeMissingPropMismatch(pname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;895</td>  <td class="nbHitsCovered">&nbsp;2</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;896</td>  <td class="nbHitsCovered"><a title="Line 896: Conditional coverage 100% (2/2).">&nbsp;96</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 896: Conditional coverage 100% (2/2).">      } <span class="keyword">else</span> <span class="keyword">if</span> (!prop1.getType().isSubtypeOf(prop2.getType(), subSuperMap)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;897</td>  <td class="nbHitsCovered">&nbsp;32</td>  <td class="src"><pre class="src">&nbsp;        boxedInfo[0] = MismatchInfo.makePropTypeMismatch(</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;898</td>  <td class="nbHitsCovered">&nbsp;16</td>  <td class="src"><pre class="src">&nbsp;            pname, prop2.getType(), prop1.getType());</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;899</td>  <td class="nbHitsCovered">&nbsp;16</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;900</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;901</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;902</td>  <td class="nbHitsCovered">&nbsp;81</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;903</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;904</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;905</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;906</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Returns true if this is a "loose subtype" of other. This only makes</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;907</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * sense if either this or other is a loose object.  This takes into</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;908</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * account whether this object is a struct, and if all the common</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;909</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * properties are in a correct subtype relationship.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;910</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;911</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Note that we never infer properties as optional on loose objects,</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;912</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * but also don't warn about possibly-inexistent properties.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;913</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;914</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">boolean</span> isLooseSubtypeOf(ObjectType other, SubtypeCache subSuperMap) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;915</td>  <td class="nbHitsUncovered"><a title="Line 915: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;5065</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 915: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">    checkState(isLoose || other.isLoose);</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;916</td>  <td class="nbHitsUncovered"><a title="Line 916: Conditional coverage 50% (1/2).">&nbsp;5065</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 916: Conditional coverage 50% (1/2).">    <span class="keyword">if</span> (other.isTopObject()) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;917</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;      <span class="keyword">return</span> <span class="keyword">true</span>;</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;918</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;919</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;920</td>  <td class="nbHitsCovered"><a title="Line 920: Conditional coverage 100% (2/2).">&nbsp;5065</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 920: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (!isLoose) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;921</td>  <td class="nbHitsCovered"><a title="Line 921: Conditional coverage 100% (2/2).">&nbsp;1356</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 921: Conditional coverage 100% (2/2).">      <span class="keyword">for</span> (String pname : other.props.keySet()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;922</td>  <td class="nbHitsCovered">&nbsp;1221</td>  <td class="src"><pre class="src">&nbsp;        QualifiedName qname = <span class="keyword">new</span> QualifiedName(pname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;923</td>  <td class="nbHitsCovered"><a title="Line 923: Conditional coverage 100% (2/2).">&nbsp;1221</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 923: Conditional coverage 100% (2/2).">        <span class="keyword">if</span> (isStruct()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;924</td>  <td class="nbHitsCovered"><a title="Line 924: Conditional coverage 100% (2/2).">&nbsp;5</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 924: Conditional coverage 100% (2/2).">          <span class="keyword">if</span> (!mayHaveProp(qname)</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;925</td>  <td class="nbHitsUncovered"><a title="Line 925: Conditional coverage 50% (1/2).">&nbsp;4</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 925: Conditional coverage 50% (1/2).">              || !getProp(qname).isSubtypeOf(other.getProp(qname), subSuperMap)) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;926</td>  <td class="nbHitsCovered">&nbsp;1</td>  <td class="src"><pre class="src">&nbsp;            <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;927</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;928</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        } <span class="keyword">else</span> {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;929</td>  <td class="nbHitsCovered"><a title="Line 929: Conditional coverage 100% (2/2).">&nbsp;1216</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 929: Conditional coverage 100% (2/2).">          <span class="keyword">if</span> (mayHaveProp(qname)</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;930</td>  <td class="nbHitsCovered"><a title="Line 930: Conditional coverage 100% (2/2).">&nbsp;1134</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 930: Conditional coverage 100% (2/2).">              &amp;&amp; !getProp(qname).isSubtypeOf(other.getProp(qname), subSuperMap)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;931</td>  <td class="nbHitsCovered">&nbsp;47</td>  <td class="src"><pre class="src">&nbsp;            <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;932</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;933</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;934</td>  <td class="nbHitsCovered">&nbsp;1173</td>  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;935</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    } <span class="keyword">else</span> { <span class="comment">// this is loose, other may be loose</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;936</td>  <td class="nbHitsCovered"><a title="Line 936: Conditional coverage 100% (2/2).">&nbsp;3709</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 936: Conditional coverage 100% (2/2).">      <span class="keyword">for</span> (String pname : <span class="keyword">this</span>.props.keySet()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;937</td>  <td class="nbHitsCovered">&nbsp;3739</td>  <td class="src"><pre class="src">&nbsp;        QualifiedName qname = <span class="keyword">new</span> QualifiedName(pname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;938</td>  <td class="nbHitsCovered"><a title="Line 938: Conditional coverage 100% (2/2).">&nbsp;3739</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 938: Conditional coverage 100% (2/2).">        <span class="keyword">if</span> (other.mayHaveProp(qname)</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;939</td>  <td class="nbHitsCovered"><a title="Line 939: Conditional coverage 100% (2/2).">&nbsp;3411</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 939: Conditional coverage 100% (2/2).">            &amp;&amp; !getProp(qname).isSubtypeOf(other.getProp(qname), subSuperMap)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;940</td>  <td class="nbHitsCovered">&nbsp;28</td>  <td class="src"><pre class="src">&nbsp;          <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;941</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;942</td>  <td class="nbHitsCovered">&nbsp;3711</td>  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;943</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;944</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;945</td>  <td class="nbHitsCovered"><a title="Line 945: Conditional coverage 100% (2/2).">&nbsp;4989</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 945: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (other.fn == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;946</td>  <td class="nbHitsCovered"><a title="Line 946: Conditional coverage 100% (2/2).">&nbsp;1782</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 946: Conditional coverage 100% (2/2).">      <span class="keyword">return</span> <span class="keyword">this</span>.fn == <span class="keyword">null</span></a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;947</td>  <td class="nbHitsUncovered"><a title="Line 947: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;151</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 947: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">          || other.nominalType.isBuiltinObject() || other.isLoose();</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;948</td>  <td class="nbHitsCovered"><a title="Line 948: Conditional coverage 100% (2/2).">&nbsp;4098</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 948: Conditional coverage 100% (2/2).">    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.fn == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;949</td>  <td class="nbHitsCovered">&nbsp;236</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> isLoose;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;950</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;951</td>  <td class="nbHitsCovered">&nbsp;3862</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> fn.isLooseSubtypeOf(other.fn);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;952</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;953</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;954</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;955</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Specializes this object with the {@code other} (related) object type.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;956</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * TODO(sdh): explain a bit more concretely how this is different from meet.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;957</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;958</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  ObjectType specialize(ObjectType other) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;959</td>  <td class="nbHitsCovered">&nbsp;18175</td>  <td class="src"><pre class="src">&nbsp;    checkState(areRelatedNominalTypes(<span class="keyword">this</span>.nominalType, other.nominalType));</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;960</td>  <td class="nbHitsUncovered"><a title="Line 960: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;18175</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 960: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">    <span class="keyword">if</span> (isTopObject() &amp;&amp; other.objectKind.isUnrestricted()) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;961</td>  <td class="nbHitsCovered">&nbsp;370</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> other;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;962</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;963</td>  <td class="nbHitsCovered"><a title="Line 963: Conditional coverage 100% (2/2).">&nbsp;17805</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 963: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (<span class="keyword">this</span>.ns != <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;964</td>  <td class="nbHitsCovered">&nbsp;8915</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> specializeNamespace(other);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;965</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;966</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    NominalType resultNomType;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;967</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// Don't turn an inline-record type to a @record, because doing this hides implicit type flows</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;968</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// needed for property disambiguation. In all other cases, use the result of pickSubclass.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;969</td>  <td class="nbHitsCovered"><a title="Line 969: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;8890</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 969: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">    <span class="keyword">if</span> (<span class="keyword">this</span>.nominalType.isBuiltinObject() &amp;&amp; other.nominalType.isStructuralInterface()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;970</td>  <td class="nbHitsCovered">&nbsp;6</td>  <td class="src"><pre class="src">&nbsp;      resultNomType = <span class="keyword">this</span>.nominalType;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;971</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    } <span class="keyword">else</span> {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;972</td>  <td class="nbHitsCovered">&nbsp;8884</td>  <td class="src"><pre class="src">&nbsp;      resultNomType = NominalType.pickSubclass(<span class="keyword">this</span>.nominalType, other.nominalType);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;973</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;974</td>  <td class="nbHitsCovered"><a title="Line 974: Conditional coverage 100% (2/2).">&nbsp;8890</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 974: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (resultNomType.isClassy()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;975</td>  <td class="nbHitsUncovered"><a title="Line 975: Conditional coverage 75% (3/4) [each condition: 50%, 100%].">&nbsp;3254</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 975: Conditional coverage 75% (3/4) [each condition: 50%, 100%].">      <span class="keyword">if</span> (<span class="keyword">this</span>.fn != <span class="keyword">null</span> || other.fn != <span class="keyword">null</span>) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;976</td>  <td class="nbHitsCovered">&nbsp;1</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">this</span>.commonTypes.getBottomObject();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;977</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;978</td>  <td class="nbHitsCovered">&nbsp;3253</td>  <td class="src"><pre class="src">&nbsp;      PersistentMap&lt;String, Property&gt; newProps =</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;979</td>  <td class="nbHitsCovered">&nbsp;3253</td>  <td class="src"><pre class="src">&nbsp;          meetPropsHelper(<span class="keyword">this</span>.commonTypes, <span class="keyword">true</span>, resultNomType, <span class="keyword">this</span>.props, other.props);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;980</td>  <td class="nbHitsCovered"><a title="Line 980: Conditional coverage 100% (2/2).">&nbsp;3253</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 980: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (<span class="keyword">this</span>.commonTypes.isBottomPropertyMap(newProps)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;981</td>  <td class="nbHitsCovered">&nbsp;4</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">this</span>.commonTypes.getBottomObject();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;982</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;983</td>  <td class="nbHitsCovered">&nbsp;3249</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">new</span> ObjectType(</pre></td></tr>
<tr>  <td class="numLine">&nbsp;984</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          <span class="keyword">this</span>.commonTypes, resultNomType, newProps, <span class="keyword">null</span>, <span class="keyword">this</span>.ns, <span class="keyword">false</span>, <span class="keyword">this</span>.objectKind);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;985</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;986</td>  <td class="nbHitsCovered">&nbsp;5636</td>  <td class="src"><pre class="src">&nbsp;    FunctionType thisFn = <span class="keyword">this</span>.fn;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;987</td>  <td class="nbHitsCovered">&nbsp;5636</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">boolean</span> isLoose = <span class="keyword">this</span>.isLoose;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;988</td>  <td class="nbHitsCovered"><a title="Line 988: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;5636</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 988: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">    <span class="keyword">if</span> (resultNomType.isFunction() &amp;&amp; <span class="keyword">this</span>.fn == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;989</td>  <td class="nbHitsCovered">&nbsp;5</td>  <td class="src"><pre class="src">&nbsp;      thisFn = other.fn;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;990</td>  <td class="nbHitsCovered">&nbsp;5</td>  <td class="src"><pre class="src">&nbsp;      isLoose = other.fn.isLoose();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;991</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;992</td>  <td class="nbHitsCovered"><a title="Line 992: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;5636</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 992: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">    <span class="keyword">if</span> (isLoose &amp;&amp; resultNomType.isLiteralObject()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;993</td>  <td class="nbHitsCovered">&nbsp;1</td>  <td class="src"><pre class="src">&nbsp;      resultNomType = <span class="keyword">this</span>.commonTypes.getObjectType();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;994</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;995</td>  <td class="nbHitsCovered">&nbsp;5636</td>  <td class="src"><pre class="src">&nbsp;    PersistentMap&lt;String, Property&gt; newProps =</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;996</td>  <td class="nbHitsCovered">&nbsp;5636</td>  <td class="src"><pre class="src">&nbsp;        meetPropsHelper(<span class="keyword">this</span>.commonTypes, <span class="keyword">true</span>, resultNomType, <span class="keyword">this</span>.props, other.props);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;997</td>  <td class="nbHitsCovered"><a title="Line 997: Conditional coverage 100% (2/2).">&nbsp;5636</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 997: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (<span class="keyword">this</span>.commonTypes.isBottomPropertyMap(newProps)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;998</td>  <td class="nbHitsCovered">&nbsp;6</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">this</span>.commonTypes.getBottomObject();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;999</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1000</td>  <td class="nbHitsCovered"><a title="Line 1000: Conditional coverage 100% (2/2).">&nbsp;5630</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1000: Conditional coverage 100% (2/2).">    FunctionType newFn = thisFn == <span class="keyword">null</span> ? <span class="keyword">null</span> : thisFn.specialize(other.fn);</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1001</td>  <td class="nbHitsUncovered"><a title="Line 1001: Conditional coverage 50% (1/2).">&nbsp;5630</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1001: Conditional coverage 50% (1/2).">    <span class="keyword">if</span> (!FunctionType.isInhabitable(newFn)) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1002</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;      <span class="keyword">return</span> <span class="keyword">this</span>.commonTypes.getBottomObject();</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1003</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1004</td>  <td class="nbHitsCovered">&nbsp;5630</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">new</span> ObjectType(</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1005</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="keyword">this</span>.commonTypes, resultNomType, newProps, newFn, <span class="keyword">this</span>.ns, isLoose, <span class="keyword">this</span>.objectKind);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1006</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1007</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1008</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1009</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Determines if the given object type is of the form {@code</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1010</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *   {p1: {p2: { ... {p_n: A}}}}</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1011</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * }. If so, returns the full qualified name "p1.p2.....p_n".</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1012</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Otherwise, returns null.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1013</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1014</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">static</span> QualifiedName getPropertyPath(ObjectType obj) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1015</td>  <td class="nbHitsCovered"><a title="Line 1015: Conditional coverage 100% (2/2).">&nbsp;10461</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1015: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (obj.props.size() != 1) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1016</td>  <td class="nbHitsCovered">&nbsp;1791</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">null</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1017</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1018</td>  <td class="nbHitsCovered">&nbsp;8670</td>  <td class="src"><pre class="src">&nbsp;    Map.Entry&lt;String, Property&gt; entry = obj.props.entrySet().iterator().next();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1019</td>  <td class="nbHitsCovered">&nbsp;8670</td>  <td class="src"><pre class="src">&nbsp;    QualifiedName leftmostPname = <span class="keyword">new</span> QualifiedName(entry.getKey());</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1020</td>  <td class="nbHitsCovered">&nbsp;8670</td>  <td class="src"><pre class="src">&nbsp;    ObjectType propAsObj = entry.getValue().getType().getObjTypeIfSingletonObj();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1021</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1022</td>  <td class="nbHitsCovered"><a title="Line 1022: Conditional coverage 100% (2/2).">&nbsp;8670</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1022: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (propAsObj == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1023</td>  <td class="nbHitsCovered">&nbsp;5088</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> leftmostPname;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1024</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1025</td>  <td class="nbHitsCovered">&nbsp;3582</td>  <td class="src"><pre class="src">&nbsp;    QualifiedName restPath = getPropertyPath(propAsObj);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1026</td>  <td class="nbHitsCovered"><a title="Line 1026: Conditional coverage 100% (2/2).">&nbsp;3582</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1026: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (restPath == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1027</td>  <td class="nbHitsCovered">&nbsp;636</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> leftmostPname;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1028</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1029</td>  <td class="nbHitsCovered">&nbsp;2946</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> QualifiedName.join(leftmostPname, restPath);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1030</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1031</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1032</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1033</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Handle the specific case of specializing a namespace (note that other</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1034</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * is not necessarily a namespace). Because specializing namespaces is</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1035</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * very expensive (not just the operation itself, but also the fact that</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1036</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * you create a large type that you flow around later and many other</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1037</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * expensive type operations happen on it), we only specialize namespace</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1038</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * types in a very specific case: to narrow down a mutable namespace field</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1039</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * that has a union type, e.g., {@code</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1040</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *   if (goog.bar.baz !== null) { ... }</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1041</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * }. In this case, other's nominal type is Object, and other has a single</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1042</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * "property path". In all other cases, we just return this namespace</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1043</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * object unchanged.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1044</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1045</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  @SuppressWarnings(<span class="string">"ReferenceEquality"</span>)</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1046</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  ObjectType specializeNamespace(ObjectType other) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1047</td>  <td class="nbHitsCovered">&nbsp;8915</td>  <td class="src"><pre class="src">&nbsp;    checkNotNull(<span class="keyword">this</span>.ns);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1048</td>  <td class="nbHitsCovered"><a title="Line 1048: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;8915</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1048: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">    <span class="keyword">if</span> (<span class="keyword">this</span> == other</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1049</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        || other.ns != <span class="keyword">null</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1050</td>  <td class="nbHitsCovered"><a title="Line 1050: Conditional coverage 100% (2/2).">&nbsp;8290</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1050: Conditional coverage 100% (2/2).">        || !other.nominalType.equals(<span class="keyword">this</span>.commonTypes.getObjectType())) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1051</td>  <td class="nbHitsCovered">&nbsp;2036</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">this</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1052</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1053</td>  <td class="nbHitsCovered">&nbsp;6879</td>  <td class="src"><pre class="src">&nbsp;    QualifiedName propPath = getPropertyPath(other);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1054</td>  <td class="nbHitsCovered"><a title="Line 1054: Conditional coverage 100% (2/2).">&nbsp;6879</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1054: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (propPath == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1055</td>  <td class="nbHitsCovered">&nbsp;1155</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">this</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1056</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1057</td>  <td class="nbHitsCovered">&nbsp;5724</td>  <td class="src"><pre class="src">&nbsp;    JSType otherPropType = other.getProp(propPath);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1058</td>  <td class="nbHitsCovered"><a title="Line 1058: Conditional coverage 100% (2/2).">&nbsp;5724</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1058: Conditional coverage 100% (2/2).">    JSType thisPropType = mayHaveProp(propPath) ? getProp(propPath) : <span class="keyword">null</span>;</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1059</td>  <td class="nbHitsCovered"><a title="Line 1059: Conditional coverage 100% (2/2).">&nbsp;5724</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1059: Conditional coverage 100% (2/2).">    JSType newPropType =</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1060</td>  <td class="nbHitsCovered">&nbsp;4715</td>  <td class="src"><pre class="src">&nbsp;        thisPropType == <span class="keyword">null</span> ? <span class="keyword">null</span> : thisPropType.specialize(otherPropType);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1061</td>  <td class="nbHitsCovered"><a title="Line 1061: Conditional coverage 100% (2/2).">&nbsp;5724</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1061: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (thisPropType != <span class="keyword">null</span></a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1062</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="comment">// Don't specialize for things like: if (goog.DEBUG) { ... }</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1063</td>  <td class="nbHitsCovered"><a title="Line 1063: Conditional coverage 100% (2/2).">&nbsp;4715</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1063: Conditional coverage 100% (2/2).">        &amp;&amp; thisPropType.isUnion()</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1064</td>  <td class="nbHitsUncovered"><a title="Line 1064: Conditional coverage 50% (1/2).">&nbsp;42</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1064: Conditional coverage 50% (1/2).">        &amp;&amp; !newPropType.isBottom()</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1065</td>  <td class="nbHitsUncovered"><a title="Line 1065: Conditional coverage 50% (1/2).">&nbsp;42</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1065: Conditional coverage 50% (1/2).">        &amp;&amp; newPropType.isSubtypeOf(thisPropType)</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1066</td>  <td class="nbHitsCovered"><a title="Line 1066: Conditional coverage 100% (2/2).">&nbsp;42</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1066: Conditional coverage 100% (2/2).">        &amp;&amp; !thisPropType.isSubtypeOf(newPropType)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1067</td>  <td class="nbHitsCovered">&nbsp;22</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> withProperty(propPath, newPropType);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1068</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1069</td>  <td class="nbHitsCovered">&nbsp;5702</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">this</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1070</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1071</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1072</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  @SuppressWarnings(<span class="string">"ReferenceEquality"</span>)</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1073</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">boolean</span> isTopObject() {</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1074</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// Reference equality because we want to make sure that we only ever create</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1075</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// one top object type.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1076</td>  <td class="nbHitsCovered"><a title="Line 1076: Conditional coverage 100% (2/2).">&nbsp;1334053</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1076: Conditional coverage 100% (2/2).">    <span class="keyword">return</span> <span class="keyword">this</span> == <span class="keyword">this</span>.commonTypes.getTopObjectType();</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1077</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1078</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1079</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  @SuppressWarnings(<span class="string">"ReferenceEquality"</span>)</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1080</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">boolean</span> isBottomObject() {</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1081</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// Reference equality because we want to make sure that we only ever create</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1082</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// one bottom object type.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1083</td>  <td class="nbHitsUncovered"><a title="Line 1083: Conditional coverage 50% (1/2).">&nbsp;91627</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1083: Conditional coverage 50% (1/2).">    <span class="keyword">return</span> <span class="keyword">this</span> == <span class="keyword">this</span>.commonTypes.getBottomObject();</a></span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1084</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1085</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1086</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1087</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * If this is an enum object (i.e. the namespace itself, not the individual</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1088</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * elements), then returns the associated EnumType; otherwise returns null.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1089</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1090</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  EnumType getEnumType() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1091</td>  <td class="nbHitsCovered"><a title="Line 1091: Conditional coverage 100% (2/2).">&nbsp;9512</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1091: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (!<span class="keyword">this</span>.nominalType.isLiteralObject()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1092</td>  <td class="nbHitsCovered">&nbsp;9346</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">null</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1093</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1094</td>  <td class="nbHitsCovered"><a title="Line 1094: Conditional coverage 100% (2/2).">&nbsp;166</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1094: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (Property p : <span class="keyword">this</span>.props.values()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1095</td>  <td class="nbHitsCovered">&nbsp;174</td>  <td class="src"><pre class="src">&nbsp;      JSType t = p.getType();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1096</td>  <td class="nbHitsCovered"><a title="Line 1096: Conditional coverage 100% (2/2).">&nbsp;174</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1096: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (t.isEnumElement()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1097</td>  <td class="nbHitsCovered">&nbsp;102</td>  <td class="src"><pre class="src">&nbsp;        EnumType e = Iterables.getOnlyElement(t.getEnums());</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1098</td>  <td class="nbHitsCovered"><a title="Line 1098: Conditional coverage 100% (2/2).">&nbsp;102</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1098: Conditional coverage 100% (2/2).">        <span class="keyword">return</span> <span class="keyword">this</span>.equals(e.toJSType().getObjTypeIfSingletonObj()) ? e : <span class="keyword">null</span>;</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1099</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1100</td>  <td class="nbHitsCovered">&nbsp;72</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1101</td>  <td class="nbHitsCovered">&nbsp;64</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">null</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1102</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1103</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1104</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">boolean</span> isEnumObject() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1105</td>  <td class="nbHitsCovered"><a title="Line 1105: Conditional coverage 100% (2/2).">&nbsp;9504</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1105: Conditional coverage 100% (2/2).">    <span class="keyword">return</span> <span class="keyword">this</span>.getEnumType() != <span class="keyword">null</span>;</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1106</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1107</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1108</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1109</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Computes the intersection type between two object types. Generally</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1110</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * this involves picking the subclass between the (related) nominal</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1111</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * types, a property map with properties from both object types (with</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1112</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * meets when properties overlap), and meeting any functions. If the</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1113</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * result is loose (either because both arguments are loose, or because</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1114</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * it is a loose function) then common properties are joined, instead.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1115</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Namespaces are not handled: a common namespace is preserved, but</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1116</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * otherwise will be dropped from the result.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1117</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1118</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">static</span> ObjectType meet(ObjectType obj1, ObjectType obj2) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1119</td>  <td class="nbHitsCovered">&nbsp;59926</td>  <td class="src"><pre class="src">&nbsp;    NominalType nt1 = obj1.nominalType;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1120</td>  <td class="nbHitsCovered">&nbsp;59926</td>  <td class="src"><pre class="src">&nbsp;    NominalType nt2 = obj2.nominalType;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1121</td>  <td class="nbHitsCovered">&nbsp;59926</td>  <td class="src"><pre class="src">&nbsp;    Preconditions.checkState(areRelatedNominalTypes(nt1, nt2),</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1122</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="string">"Unrelated nominal types %s and %s"</span>, nt1, nt2);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1123</td>  <td class="nbHitsUncovered"><a title="Line 1123: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;59926</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1123: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">    <span class="keyword">if</span> (obj1.isTopObject() || obj2.isBottomObject()) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1124</td>  <td class="nbHitsCovered">&nbsp;1437</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> obj2;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1125</td>  <td class="nbHitsUncovered"><a title="Line 1125: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;58489</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1125: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">    } <span class="keyword">else</span> <span class="keyword">if</span> (obj2.isTopObject() || obj1.isBottomObject()) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1126</td>  <td class="nbHitsCovered">&nbsp;25451</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> obj1;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1127</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1128</td>  <td class="nbHitsCovered">&nbsp;33038</td>  <td class="src"><pre class="src">&nbsp;    JSTypes commonTypes = obj1.commonTypes;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1129</td>  <td class="nbHitsCovered">&nbsp;33038</td>  <td class="src"><pre class="src">&nbsp;    NominalType resultNomType = NominalType.pickSubclass(nt1, nt2);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1130</td>  <td class="nbHitsCovered">&nbsp;33038</td>  <td class="src"><pre class="src">&nbsp;    FunctionType fn = FunctionType.meet(obj1.fn, obj2.fn);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1131</td>  <td class="nbHitsCovered"><a title="Line 1131: Conditional coverage 100% (2/2).">&nbsp;33038</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1131: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (!FunctionType.isInhabitable(fn)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1132</td>  <td class="nbHitsCovered">&nbsp;4</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> commonTypes.getBottomObject();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1133</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1134</td>  <td class="nbHitsCovered"><a title="Line 1134: Conditional coverage 100% (8/8) [each condition: 100%, 100%, 100%, 100%].">&nbsp;33034</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1134: Conditional coverage 100% (8/8) [each condition: 100%, 100%, 100%, 100%].">    <span class="keyword">boolean</span> isLoose = (obj1.isLoose &amp;&amp; obj2.isLoose) || (fn != <span class="keyword">null</span> &amp;&amp; fn.isLoose());</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1135</td>  <td class="nbHitsCovered"><a title="Line 1135: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;33034</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1135: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">    <span class="keyword">if</span> (resultNomType.isFunction() &amp;&amp; fn == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1136</td>  <td class="nbHitsUncovered"><a title="Line 1136: Conditional coverage 50% (1/2).">&nbsp;3</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1136: Conditional coverage 50% (1/2).">      fn = obj1.fn == <span class="keyword">null</span> ? obj2.fn : obj1.fn;</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1137</td>  <td class="nbHitsCovered">&nbsp;3</td>  <td class="src"><pre class="src">&nbsp;      isLoose = fn.isLoose();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1138</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1139</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    PersistentMap&lt;String, Property&gt; props;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1140</td>  <td class="nbHitsCovered"><a title="Line 1140: Conditional coverage 100% (2/2).">&nbsp;33034</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1140: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (isLoose) {</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1141</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      <span class="comment">// Do a simple union of the maps</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1142</td>  <td class="nbHitsCovered">&nbsp;109</td>  <td class="src"><pre class="src">&nbsp;      props = joinPropsLoosely(obj1.props, obj2.props);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1143</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    } <span class="keyword">else</span> {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1144</td>  <td class="nbHitsCovered">&nbsp;32925</td>  <td class="src"><pre class="src">&nbsp;      props = meetPropsHelper(commonTypes, <span class="keyword">false</span>, resultNomType, obj1.props, obj2.props);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1145</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1146</td>  <td class="nbHitsUncovered"><a title="Line 1146: Conditional coverage 50% (1/2).">&nbsp;33034</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1146: Conditional coverage 50% (1/2).">    <span class="keyword">if</span> (commonTypes.isBottomPropertyMap(props)) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1147</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;      <span class="keyword">return</span> commonTypes.getBottomObject();</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1148</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1149</td>  <td class="nbHitsCovered">&nbsp;33034</td>  <td class="src"><pre class="src">&nbsp;    ObjectKind ok = ObjectKind.meet(obj1.objectKind, obj2.objectKind);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1150</td>  <td class="nbHitsCovered"><a title="Line 1150: Conditional coverage 100% (2/2).">&nbsp;33034</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1150: Conditional coverage 100% (2/2).">    Namespace resultNs = Objects.equals(obj1.ns, obj2.ns) ? obj1.ns : <span class="keyword">null</span>;</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1151</td>  <td class="nbHitsCovered">&nbsp;33034</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">new</span> ObjectType(commonTypes, resultNomType, props, fn, resultNs, isLoose, ok);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1152</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1153</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1154</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1155</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Computes the union type between two object types. Generally this</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1156</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * involves picking the superclass between the (related) nominal types,</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1157</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * the union of the property maps (joining on overlaps), and joining</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1158</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * any functions. Namespaces are not handled: a common namespace is</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1159</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * preserved, but otherwise will be dropped from the result.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1160</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1161</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">static</span> ObjectType join(ObjectType obj1, ObjectType obj2) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1162</td>  <td class="nbHitsCovered"><a title="Line 1162: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;1383</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1162: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">    <span class="keyword">if</span> (obj1.isTopObject() || obj2.isTopObject()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1163</td>  <td class="nbHitsCovered">&nbsp;281</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> obj1.commonTypes.getTopObjectType();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1164</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1165</td>  <td class="nbHitsCovered"><a title="Line 1165: Conditional coverage 100% (2/2).">&nbsp;1102</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1165: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (obj1.equals(obj2)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1166</td>  <td class="nbHitsCovered">&nbsp;279</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> obj1;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1167</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1168</td>  <td class="nbHitsUncovered"><a title="Line 1168: Conditional coverage 25% (1/4) [each condition: 50%, 0%].">&nbsp;823</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1168: Conditional coverage 25% (1/4) [each condition: 50%, 0%].">    <span class="keyword">if</span> (obj1.isPrototypeObject() &amp;&amp; obj2.isPrototypeObject()) {</a></span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1169</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      <span class="comment">// When Bar and Baz extend Foo, joining Bar.prototype and Baz.prototype returns Foo.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1170</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;      <span class="keyword">return</span> join(</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1171</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;          obj1.getNominalType().getInstanceAsObjectType(),</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1172</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;          obj2.getNominalType().getInstanceAsObjectType());</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1173</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1174</td>  <td class="nbHitsCovered">&nbsp;823</td>  <td class="src"><pre class="src">&nbsp;    NominalType nt1 = obj1.nominalType;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1175</td>  <td class="nbHitsCovered">&nbsp;823</td>  <td class="src"><pre class="src">&nbsp;    NominalType nt2 = obj2.nominalType;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1176</td>  <td class="nbHitsUncovered"><a title="Line 1176: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;823</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1176: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">    checkState(nt1.isRawSubtypeOf(nt2) || nt2.isRawSubtypeOf(nt1));</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1177</td>  <td class="nbHitsCovered">&nbsp;823</td>  <td class="src"><pre class="src">&nbsp;    JSTypes commonTypes = obj1.commonTypes;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1178</td>  <td class="nbHitsCovered"><a title="Line 1178: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;823</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1178: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">    <span class="keyword">boolean</span> isLoose = obj1.isLoose || obj2.isLoose;</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1179</td>  <td class="nbHitsCovered">&nbsp;823</td>  <td class="src"><pre class="src">&nbsp;    FunctionType fn = FunctionType.join(obj1.fn, obj2.fn);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1180</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    PersistentMap&lt;String, Property&gt; props;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1181</td>  <td class="nbHitsCovered"><a title="Line 1181: Conditional coverage 100% (2/2).">&nbsp;823</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1181: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (isLoose) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1182</td>  <td class="nbHitsCovered"><a title="Line 1182: Conditional coverage 100% (2/2).">&nbsp;84</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1182: Conditional coverage 100% (2/2).">      fn = fn == <span class="keyword">null</span> ? <span class="keyword">null</span> : fn.withLoose();</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1183</td>  <td class="nbHitsCovered">&nbsp;84</td>  <td class="src"><pre class="src">&nbsp;      props = joinPropsLoosely(obj1.props, obj2.props);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1184</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    } <span class="keyword">else</span> {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1185</td>  <td class="nbHitsCovered">&nbsp;739</td>  <td class="src"><pre class="src">&nbsp;      props = joinProps(obj1.props, obj2.props, nt1, nt2);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1186</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1187</td>  <td class="nbHitsCovered">&nbsp;823</td>  <td class="src"><pre class="src">&nbsp;    NominalType nominal = NominalType.join(nt1, nt2);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1188</td>  <td class="nbHitsCovered"><a title="Line 1188: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;823</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1188: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">    <span class="keyword">if</span> (nominal.isBuiltinObject() &amp;&amp; fn != <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1189</td>  <td class="nbHitsUncovered"><a title="Line 1189: Conditional coverage 50% (1/2).">&nbsp;4</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1189: Conditional coverage 50% (1/2).">      <span class="keyword">if</span> (isLoose) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1190</td>  <td class="nbHitsCovered">&nbsp;4</td>  <td class="src"><pre class="src">&nbsp;        nominal = obj1.commonTypes.getFunctionType();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1191</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      } <span class="keyword">else</span> {</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1192</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="comment">// NOTE(dimvar): we don't have a unit test that triggers this case,</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1193</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="comment">// but it happens in our regression tests.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1194</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;        fn = <span class="keyword">null</span>;</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1195</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1196</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1197</td>  <td class="nbHitsCovered"><a title="Line 1197: Conditional coverage 100% (2/2).">&nbsp;823</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1197: Conditional coverage 100% (2/2).">    Namespace ns = Objects.equals(obj1.ns, obj2.ns) ? obj1.ns : <span class="keyword">null</span>;</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1198</td>  <td class="nbHitsCovered">&nbsp;1646</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> makeObjectType(commonTypes, nominal, props, fn, ns, isLoose,</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1199</td>  <td class="nbHitsCovered">&nbsp;823</td>  <td class="src"><pre class="src">&nbsp;        ObjectKind.join(obj1.objectKind, obj2.objectKind));</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1200</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1201</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1202</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> canMergeObjectsInJoin(ObjectType obj1, ObjectType obj2) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1203</td>  <td class="nbHitsCovered"><a title="Line 1203: Conditional coverage 100% (6/6) [each condition: 100%, 100%, 100%].">&nbsp;9678</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1203: Conditional coverage 100% (6/6) [each condition: 100%, 100%, 100%].">    <span class="keyword">if</span> (obj1.isTopObject() || obj2.isTopObject() || obj1.equals(obj2)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1204</td>  <td class="nbHitsCovered">&nbsp;560</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1205</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1206</td>  <td class="nbHitsCovered">&nbsp;9118</td>  <td class="src"><pre class="src">&nbsp;    NominalType nt1 = obj1.nominalType;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1207</td>  <td class="nbHitsCovered">&nbsp;9118</td>  <td class="src"><pre class="src">&nbsp;    NominalType nt2 = obj2.nominalType;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1208</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// In a union, there is at most one object whose nominal type is Object (or literal object).</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1209</td>  <td class="nbHitsCovered"><a title="Line 1209: Conditional coverage 100% (2/2).">&nbsp;9118</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1209: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (!obj1.isPrototypeObject()</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1210</td>  <td class="nbHitsCovered"><a title="Line 1210: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;9113</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1210: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">        &amp;&amp; (nt1.isBuiltinObject() || nt1.isLiteralObject())</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1211</td>  <td class="nbHitsUncovered"><a title="Line 1211: Conditional coverage 50% (1/2).">&nbsp;450</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1211: Conditional coverage 50% (1/2).">        &amp;&amp; !obj2.isPrototypeObject()</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1212</td>  <td class="nbHitsCovered"><a title="Line 1212: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;450</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1212: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">        &amp;&amp; (nt2.isBuiltinObject() || nt2.isLiteralObject())) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1213</td>  <td class="nbHitsCovered">&nbsp;426</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1214</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1215</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// Merge related classy objects, but don't merge a classy object with a built-in object.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1216</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// The reason for the latter is that some joins happen during typedef resolution, when we</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1217</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// have not registered all properties on nominal types yet.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1218</td>  <td class="nbHitsCovered"><a title="Line 1218: Conditional coverage 100% (2/2).">&nbsp;8692</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1218: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (nt1.isBuiltinObject()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1219</td>  <td class="nbHitsUncovered"><a title="Line 1219: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;14</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1219: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">      <span class="keyword">return</span> obj1.isLoose &amp;&amp; obj2.isSubtypeOf(obj1, SubtypeCache.create());</a></span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1220</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1221</td>  <td class="nbHitsCovered"><a title="Line 1221: Conditional coverage 100% (2/2).">&nbsp;8678</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1221: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (nt2.isBuiltinObject()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1222</td>  <td class="nbHitsCovered"><a title="Line 1222: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;3893</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1222: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">      <span class="keyword">return</span> obj2.isLoose &amp;&amp; obj1.isSubtypeOf(obj2, SubtypeCache.create());</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1223</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1224</td>  <td class="nbHitsCovered"><a title="Line 1224: Conditional coverage 100% (2/2).">&nbsp;9570</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1224: Conditional coverage 100% (2/2).">    <span class="keyword">return</span> !obj1.isPrototypeObject()</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1225</td>  <td class="nbHitsUncovered"><a title="Line 1225: Conditional coverage 50% (1/2).">&nbsp;4782</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1225: Conditional coverage 50% (1/2).">        &amp;&amp; !obj2.isPrototypeObject()</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1226</td>  <td class="nbHitsCovered"><a title="Line 1226: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;4782</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1226: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">        &amp;&amp; (areRelatedNominalTypes(nt1, nt2) || NominalType.equalRawTypes(nt1, nt2));</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1227</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1228</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1229</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1230</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Joins two sets of object types.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1231</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * First, we put the types from both sets in a collection.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1232</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Then, we iterate over the collection and normalize it, so that no two elements in the</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1233</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * collection are in the subtype relationship. Joining the elements of objs1 and objs2 pairwise</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1234</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * does not ensure that the result is normalized.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1235</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1236</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">static</span> ImmutableSet&lt;ObjectType&gt; joinSets(</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1237</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      ImmutableSet&lt;ObjectType&gt; objs1, ImmutableSet&lt;ObjectType&gt; objs2) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1238</td>  <td class="nbHitsCovered"><a title="Line 1238: Conditional coverage 100% (2/2).">&nbsp;929279</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1238: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (objs1.isEmpty()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1239</td>  <td class="nbHitsCovered">&nbsp;669325</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> objs2;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1240</td>  <td class="nbHitsCovered"><a title="Line 1240: Conditional coverage 100% (2/2).">&nbsp;259954</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1240: Conditional coverage 100% (2/2).">    } <span class="keyword">else</span> <span class="keyword">if</span> (objs2.isEmpty()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1241</td>  <td class="nbHitsCovered">&nbsp;250480</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> objs1;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1242</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1243</td>  <td class="nbHitsCovered">&nbsp;9474</td>  <td class="src"><pre class="src">&nbsp;    List&lt;ObjectType&gt; objs = <span class="keyword">new</span> ArrayList&lt;&gt;(objs1);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1244</td>  <td class="nbHitsCovered">&nbsp;9474</td>  <td class="src"><pre class="src">&nbsp;    objs.addAll(objs2);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1245</td>  <td class="nbHitsCovered"><a title="Line 1245: Conditional coverage 100% (2/2).">&nbsp;19045</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1245: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (<span class="keyword">int</span> i = 0; i &lt; objs.size() - 1; i++) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1246</td>  <td class="nbHitsCovered">&nbsp;9571</td>  <td class="src"><pre class="src">&nbsp;      ObjectType obj1 = objs.get(i);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1247</td>  <td class="nbHitsCovered"><a title="Line 1247: Conditional coverage 100% (2/2).">&nbsp;19249</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1247: Conditional coverage 100% (2/2).">      <span class="keyword">for</span> (<span class="keyword">int</span> j = i + 1; j &lt; objs.size(); j++) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1248</td>  <td class="nbHitsCovered">&nbsp;9678</td>  <td class="src"><pre class="src">&nbsp;        ObjectType obj2 = objs.get(j);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1249</td>  <td class="nbHitsCovered"><a title="Line 1249: Conditional coverage 100% (2/2).">&nbsp;9678</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1249: Conditional coverage 100% (2/2).">        <span class="keyword">if</span> (canMergeObjectsInJoin(obj1, obj2)) {</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1250</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          <span class="comment">// obj1 and obj2 may be in the subtype relation.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1251</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          <span class="comment">// Even then, we want to join them because we don't want to forget</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1252</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          <span class="comment">// any extra properties present in the subtype object.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1253</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          <span class="comment">// TODO(dimvar): currently, a class and a @record that is a</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1254</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          <span class="comment">// supertype can be in the same union. We must normalize like we do</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1255</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          <span class="comment">// for other types, to maintain the invariant that the members of</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1256</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          <span class="comment">// a union are not subtypes of each other.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1257</td>  <td class="nbHitsCovered">&nbsp;1383</td>  <td class="src"><pre class="src">&nbsp;          objs.set(i, <span class="keyword">null</span>);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1258</td>  <td class="nbHitsCovered">&nbsp;1383</td>  <td class="src"><pre class="src">&nbsp;          objs.set(j, join(obj1, obj2));</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1259</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1260</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1261</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1262</td>  <td class="nbHitsCovered">&nbsp;9474</td>  <td class="src"><pre class="src">&nbsp;    ImmutableSet.Builder&lt;ObjectType&gt; builder = ImmutableSet.builder();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1263</td>  <td class="nbHitsCovered"><a title="Line 1263: Conditional coverage 100% (2/2).">&nbsp;9474</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1263: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (ObjectType obj : objs) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1264</td>  <td class="nbHitsCovered"><a title="Line 1264: Conditional coverage 100% (2/2).">&nbsp;19045</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1264: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (obj != <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1265</td>  <td class="nbHitsCovered">&nbsp;17665</td>  <td class="src"><pre class="src">&nbsp;        builder.add(obj);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1266</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1267</td>  <td class="nbHitsCovered">&nbsp;19045</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1268</td>  <td class="nbHitsCovered">&nbsp;9474</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> builder.build();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1269</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1270</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1271</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/** Returns true if either nominal type is a subtype of the other. */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1272</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> areRelatedNominalTypes(NominalType c1, NominalType c2) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1273</td>  <td class="nbHitsCovered"><a title="Line 1273: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;161461</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1273: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">    <span class="keyword">return</span> c1.isNominalSubtypeOf(c2) || c2.isNominalSubtypeOf(c1);</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1274</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1275</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1276</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1277</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Utility method extracting common functionality between</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1278</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * {@link #meetSets} and {@link #specializeSet}.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1279</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1280</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * TODO(dimvar): handle greatest lower bound of interface types.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1281</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * If we do that, we need to normalize the output, otherwise it could</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1282</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * contain two object types that are in a subtype relation, e.g.,</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1283</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * see NewTypeInferenceTest#testDifficultObjectSpecialization.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1284</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1285</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">static</span> ImmutableSet&lt;ObjectType&gt; meetSetsHelper(</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1286</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      <span class="keyword">boolean</span> specializeObjs1, Set&lt;ObjectType&gt; objs1, Set&lt;ObjectType&gt; objs2) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1287</td>  <td class="nbHitsCovered">&nbsp;91248</td>  <td class="src"><pre class="src">&nbsp;    ObjectsBuilder newObjs = <span class="keyword">new</span> ObjectsBuilder();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1288</td>  <td class="nbHitsCovered"><a title="Line 1288: Conditional coverage 100% (2/2).">&nbsp;91248</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1288: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (ObjectType obj2 : objs2) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1289</td>  <td class="nbHitsCovered"><a title="Line 1289: Conditional coverage 100% (2/2).">&nbsp;81732</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1289: Conditional coverage 100% (2/2).">      <span class="keyword">for</span> (ObjectType obj1 : objs1) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1290</td>  <td class="nbHitsCovered"><a title="Line 1290: Conditional coverage 100% (2/2).">&nbsp;78578</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1290: Conditional coverage 100% (2/2).">        <span class="keyword">if</span> (areRelatedNominalTypes(obj1.nominalType, obj2.nominalType)) {</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1291</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          ObjectType newObj;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1292</td>  <td class="nbHitsCovered"><a title="Line 1292: Conditional coverage 100% (2/2).">&nbsp;78091</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1292: Conditional coverage 100% (2/2).">          <span class="keyword">if</span> (specializeObjs1) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1293</td>  <td class="nbHitsCovered">&nbsp;18175</td>  <td class="src"><pre class="src">&nbsp;            newObj = obj1.specialize(obj2);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1294</td>  <td class="nbHitsUncovered"><a title="Line 1294: Conditional coverage 50% (1/2).">&nbsp;18175</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1294: Conditional coverage 50% (1/2).">            <span class="keyword">if</span> (newObj == <span class="keyword">null</span>) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1295</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;              <span class="keyword">continue</span>;</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1296</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;            }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1297</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          } <span class="keyword">else</span> {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1298</td>  <td class="nbHitsCovered">&nbsp;59916</td>  <td class="src"><pre class="src">&nbsp;            newObj = meet(obj1, obj2);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1299</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;          }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1300</td>  <td class="nbHitsCovered">&nbsp;78091</td>  <td class="src"><pre class="src">&nbsp;          newObjs.add(newObj);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1301</td>  <td class="nbHitsCovered"><a title="Line 1301: Conditional coverage 100% (2/2).">&nbsp;78091</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1301: Conditional coverage 100% (2/2).">        } <span class="keyword">else</span> <span class="keyword">if</span> (obj1.nominalType.isStructuralInterface()</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1302</td>  <td class="nbHitsCovered"><a title="Line 1302: Conditional coverage 100% (2/2).">&nbsp;21</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1302: Conditional coverage 100% (2/2).">            &amp;&amp; obj2.isSubtypeOf(obj1, SubtypeCache.create())) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1303</td>  <td class="nbHitsCovered">&nbsp;20</td>  <td class="src"><pre class="src">&nbsp;          newObjs.add(obj2);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1304</td>  <td class="nbHitsCovered"><a title="Line 1304: Conditional coverage 100% (2/2).">&nbsp;467</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1304: Conditional coverage 100% (2/2).">        } <span class="keyword">else</span> <span class="keyword">if</span> (obj2.nominalType.isStructuralInterface()</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1305</td>  <td class="nbHitsCovered"><a title="Line 1305: Conditional coverage 100% (2/2).">&nbsp;33</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1305: Conditional coverage 100% (2/2).">            &amp;&amp; obj1.isSubtypeOf(obj2, SubtypeCache.create())) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1306</td>  <td class="nbHitsCovered">&nbsp;31</td>  <td class="src"><pre class="src">&nbsp;          newObjs.add(obj1);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1307</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1308</td>  <td class="nbHitsCovered">&nbsp;78578</td>  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1309</td>  <td class="nbHitsCovered">&nbsp;81732</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1310</td>  <td class="nbHitsCovered">&nbsp;91248</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> newObjs.build();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1311</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1312</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1313</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1314</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Meets two sets of object types by distributing the meet over</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1315</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * the union: (A|B)(C|D) = (AC)|(AD)|(BC)|(BD), though an</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1316</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * individual meet will only show up in the result if the two</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1317</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * types are related - that is, one is a subclass of the other,</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1318</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * either nominally (for classes and interfaces) or structurally</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1319</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * (for records). All other cases meet to bottom and are therefore</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1320</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * excluded from the result.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1321</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1322</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">static</span> ImmutableSet&lt;ObjectType&gt; meetSets(Set&lt;ObjectType&gt; objs1, Set&lt;ObjectType&gt; objs2) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1323</td>  <td class="nbHitsCovered">&nbsp;72465</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> meetSetsHelper(<span class="keyword">false</span>, objs1, objs2);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1324</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1325</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1326</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1327</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Similar to {@link #meetSets}, but related nominal types are</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1328</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * specalized instead of met.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1329</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1330</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">static</span> ImmutableSet&lt;ObjectType&gt; specializeSet(Set&lt;ObjectType&gt; objs1, Set&lt;ObjectType&gt; objs2) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1331</td>  <td class="nbHitsCovered">&nbsp;18783</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> meetSetsHelper(<span class="keyword">true</span>, objs1, objs2);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1332</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1333</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1334</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  FunctionType getFunType() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1335</td>  <td class="nbHitsCovered">&nbsp;1691776</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> fn;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1336</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1337</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1338</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  NominalType getNominalType() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1339</td>  <td class="nbHitsCovered">&nbsp;1127245</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">this</span>.nominalType;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1340</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1341</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1342</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  @Override</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1343</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">public</span> JSType getProp(QualifiedName qname) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1344</td>  <td class="nbHitsCovered">&nbsp;1089570</td>  <td class="src"><pre class="src">&nbsp;    Property p = getLeftmostProp(qname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1345</td>  <td class="nbHitsCovered"><a title="Line 1345: Conditional coverage 100% (2/2).">&nbsp;1089570</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1345: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (qname.isIdentifier()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1346</td>  <td class="nbHitsCovered"><a title="Line 1346: Conditional coverage 100% (2/2).">&nbsp;924135</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1346: Conditional coverage 100% (2/2).">      <span class="keyword">return</span> p == <span class="keyword">null</span> ? <span class="keyword">this</span>.commonTypes.UNDEFINED : p.getType();</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1347</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    } <span class="keyword">else</span> {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1348</td>  <td class="nbHitsUncovered"><a title="Line 1348: Conditional coverage 50% (1/2).">&nbsp;165435</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1348: Conditional coverage 50% (1/2).">      checkState(p != <span class="keyword">null</span>);</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1349</td>  <td class="nbHitsCovered">&nbsp;165435</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> p.getType().getProp(qname.getAllButLeftmost());</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1350</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1351</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1352</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1353</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  @Override</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1354</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">public</span> JSType getDeclaredProp(QualifiedName qname) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1355</td>  <td class="nbHitsCovered">&nbsp;37955</td>  <td class="src"><pre class="src">&nbsp;    Property p = getLeftmostProp(qname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1356</td>  <td class="nbHitsCovered"><a title="Line 1356: Conditional coverage 100% (2/2).">&nbsp;37955</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1356: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (p == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1357</td>  <td class="nbHitsCovered">&nbsp;30108</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">null</span>;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1358</td>  <td class="nbHitsUncovered"><a title="Line 1358: Conditional coverage 50% (1/2).">&nbsp;7847</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1358: Conditional coverage 50% (1/2).">    } <span class="keyword">else</span> <span class="keyword">if</span> (qname.isIdentifier()) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1359</td>  <td class="nbHitsCovered"><a title="Line 1359: Conditional coverage 100% (2/2).">&nbsp;7847</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1359: Conditional coverage 100% (2/2).">      <span class="keyword">return</span> p.isDeclared() ? p.getDeclaredType() : <span class="keyword">null</span>;</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1360</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1361</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;    <span class="keyword">return</span> p.getType().getDeclaredProp(qname.getAllButLeftmost());</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1362</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1363</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1364</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1365</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Returns the property corresponding to the left-most component of the</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1366</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * qname. All other components of qname are ignored. First checks the</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1367</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * property map, then the namespace, and finally the nominal type.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1368</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Returns null if no property is found.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1369</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1370</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> Property getLeftmostProp(QualifiedName qname) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1371</td>  <td class="nbHitsCovered">&nbsp;2237063</td>  <td class="src"><pre class="src">&nbsp;    String pname = qname.getLeftmostName();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1372</td>  <td class="nbHitsCovered">&nbsp;2237063</td>  <td class="src"><pre class="src">&nbsp;    Property p = props.get(pname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1373</td>  <td class="nbHitsCovered"><a title="Line 1373: Conditional coverage 100% (2/2).">&nbsp;2237063</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1373: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (p != <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1374</td>  <td class="nbHitsCovered">&nbsp;904445</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> p;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1375</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1376</td>  <td class="nbHitsCovered"><a title="Line 1376: Conditional coverage 100% (2/2).">&nbsp;1332618</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1376: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (<span class="keyword">this</span>.ns != <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1377</td>  <td class="nbHitsCovered">&nbsp;635266</td>  <td class="src"><pre class="src">&nbsp;      p = <span class="keyword">this</span>.ns.getNsProp(pname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1378</td>  <td class="nbHitsCovered"><a title="Line 1378: Conditional coverage 100% (2/2).">&nbsp;635266</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1378: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (p != <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1379</td>  <td class="nbHitsCovered">&nbsp;587766</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> p;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1380</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1381</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1382</td>  <td class="nbHitsCovered">&nbsp;744852</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">this</span>.nominalType.getProp(pname, PropAccess.INCLUDE_STRAY_PROPS);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1383</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1384</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1385</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1386</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Similar to {@link #getLeftmostProp}, but does not return the specialized</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1387</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * versions of any properties already present on the nominal type.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1388</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   *</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1389</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * TODO(aravindpg): This may be unsuitable from a typing point of view.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1390</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Revisit if needed.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1391</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1392</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> Property getLeftmostNonInheritedProp(QualifiedName qname) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1393</td>  <td class="nbHitsCovered">&nbsp;115752</td>  <td class="src"><pre class="src">&nbsp;    String pname = qname.getLeftmostName();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1394</td>  <td class="nbHitsCovered">&nbsp;115752</td>  <td class="src"><pre class="src">&nbsp;    Property p = props.get(pname);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1395</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// Only return the extra/specialized prop p if we know that we don't have this property</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1396</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// on our nominal type.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1397</td>  <td class="nbHitsCovered"><a title="Line 1397: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;115752</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1397: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">    <span class="keyword">if</span> (p != <span class="keyword">null</span> &amp;&amp; !<span class="keyword">this</span>.nominalType.mayHaveProp(pname)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1398</td>  <td class="nbHitsCovered">&nbsp;13040</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> p;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1399</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1400</td>  <td class="nbHitsCovered"><a title="Line 1400: Conditional coverage 100% (2/2).">&nbsp;102712</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1400: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (<span class="keyword">this</span>.ns != <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1401</td>  <td class="nbHitsCovered">&nbsp;24941</td>  <td class="src"><pre class="src">&nbsp;      p = <span class="keyword">this</span>.ns.getNsProp(pname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1402</td>  <td class="nbHitsCovered"><a title="Line 1402: Conditional coverage 100% (2/2).">&nbsp;24941</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1402: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (p != <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1403</td>  <td class="nbHitsCovered">&nbsp;24875</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> p;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1404</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1405</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1406</td>  <td class="nbHitsCovered">&nbsp;77837</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">this</span>.nominalType.getNonInheritedProp(pname);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1407</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1408</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1409</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1410</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Returns the node that defines the given property, or null if the</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1411</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * property does not exist. May return definitions on supertypes.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1412</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1413</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  Node getPropertyDefSite(String propertyName) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1414</td>  <td class="nbHitsCovered">&nbsp;29631</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> getPropertyDefSiteHelper(propertyName, <span class="keyword">false</span>);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1415</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1416</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1417</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1418</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Returns the node that defines the given property on this exact object, or null if the</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1419</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * property does not exist (or only exists on supertypes).</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1420</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1421</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  Node getNonInheritedPropertyDefSite(String propertyName) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1422</td>  <td class="nbHitsCovered">&nbsp;114406</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> getPropertyDefSiteHelper(propertyName, <span class="keyword">true</span>);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1423</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1424</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1425</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> Node getPropertyDefSiteHelper(String propertyName, <span class="keyword">boolean</span> nonInheritedProp) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1426</td>  <td class="nbHitsCovered">&nbsp;144037</td>  <td class="src"><pre class="src">&nbsp;    QualifiedName qname = <span class="keyword">new</span> QualifiedName(propertyName);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1427</td>  <td class="nbHitsCovered"><a title="Line 1427: Conditional coverage 100% (2/2).">&nbsp;144037</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1427: Conditional coverage 100% (2/2).">    Property p = nonInheritedProp ? getLeftmostNonInheritedProp(qname) : getLeftmostProp(qname);</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1428</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// Try getters and setters specially.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1429</td>  <td class="nbHitsCovered"><a title="Line 1429: Conditional coverage 100% (2/2).">&nbsp;144037</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1429: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (p == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1430</td>  <td class="nbHitsCovered">&nbsp;74738</td>  <td class="src"><pre class="src">&nbsp;      p = getLeftmostProp(<span class="keyword">new</span> QualifiedName(<span class="keyword">this</span>.commonTypes.createGetterPropName(propertyName)));</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1431</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1432</td>  <td class="nbHitsCovered"><a title="Line 1432: Conditional coverage 100% (2/2).">&nbsp;144037</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1432: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (p == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1433</td>  <td class="nbHitsCovered">&nbsp;74730</td>  <td class="src"><pre class="src">&nbsp;      p = getLeftmostProp(<span class="keyword">new</span> QualifiedName(<span class="keyword">this</span>.commonTypes.createSetterPropName(propertyName)));</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1434</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1435</td>  <td class="nbHitsCovered"><a title="Line 1435: Conditional coverage 100% (2/2).">&nbsp;144037</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1435: Conditional coverage 100% (2/2).">    <span class="keyword">return</span> p == <span class="keyword">null</span> ? <span class="keyword">null</span> : p.getDefSite();</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1436</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1437</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1438</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  @Override</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1439</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">public</span> <span class="keyword">boolean</span> mayHaveProp(QualifiedName qname) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1440</td>  <td class="nbHitsCovered">&nbsp;722307</td>  <td class="src"><pre class="src">&nbsp;    Property p = getLeftmostProp(qname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1441</td>  <td class="nbHitsCovered"><a title="Line 1441: Conditional coverage 100% (2/2).">&nbsp;1444614</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1441: Conditional coverage 100% (2/2).">    <span class="keyword">return</span> p != <span class="keyword">null</span> &amp;&amp;</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1442</td>  <td class="nbHitsCovered"><a title="Line 1442: Conditional coverage 100% (2/2).">&nbsp;615070</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1442: Conditional coverage 100% (2/2).">        (qname.isIdentifier() ||</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1443</td>  <td class="nbHitsCovered"><a title="Line 1443: Conditional coverage 100% (2/2).">&nbsp;164826</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1443: Conditional coverage 100% (2/2).">        p.getType().mayHaveProp(qname.getAllButLeftmost()));</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1444</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1445</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1446</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  @Override</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1447</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">public</span> <span class="keyword">boolean</span> hasProp(QualifiedName qname) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1448</td>  <td class="nbHitsCovered">&nbsp;99581</td>  <td class="src"><pre class="src">&nbsp;    checkArgument(qname.isIdentifier());</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1449</td>  <td class="nbHitsCovered">&nbsp;99581</td>  <td class="src"><pre class="src">&nbsp;    Property p = getLeftmostProp(qname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1450</td>  <td class="nbHitsCovered"><a title="Line 1450: Conditional coverage 100% (2/2).">&nbsp;99581</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1450: Conditional coverage 100% (2/2).">    <span class="keyword">return</span> p != <span class="keyword">null</span>;</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1451</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1452</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1453</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1454</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Similar to {@link #hasProp}, but disregards properties that are</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1455</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * only defined on supertypes.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1456</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1457</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">boolean</span> hasNonInheritedProperty(QualifiedName qname) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1458</td>  <td class="nbHitsCovered">&nbsp;894</td>  <td class="src"><pre class="src">&nbsp;    checkArgument(qname.isIdentifier());</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1459</td>  <td class="nbHitsCovered">&nbsp;894</td>  <td class="src"><pre class="src">&nbsp;    Property p = getLeftmostNonInheritedProp(qname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1460</td>  <td class="nbHitsCovered">&nbsp;894</td>  <td class="src"><pre class="src">&nbsp;    String pname = qname.getLeftmostName();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1461</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// Try getters and setters specially.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1462</td>  <td class="nbHitsCovered"><a title="Line 1462: Conditional coverage 100% (2/2).">&nbsp;894</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1462: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (p == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1463</td>  <td class="nbHitsCovered">&nbsp;904</td>  <td class="src"><pre class="src">&nbsp;      p = getLeftmostNonInheritedProp(</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1464</td>  <td class="nbHitsCovered">&nbsp;452</td>  <td class="src"><pre class="src">&nbsp;          <span class="keyword">new</span> QualifiedName(<span class="keyword">this</span>.commonTypes.createGetterPropName(pname)));</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1465</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1466</td>  <td class="nbHitsCovered"><a title="Line 1466: Conditional coverage 100% (2/2).">&nbsp;894</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1466: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (p == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1467</td>  <td class="nbHitsCovered">&nbsp;439</td>  <td class="src"><pre class="src">&nbsp;      p = getLeftmostProp(<span class="keyword">new</span> QualifiedName(<span class="keyword">this</span>.commonTypes.createSetterPropName(pname)));</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1468</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1469</td>  <td class="nbHitsCovered"><a title="Line 1469: Conditional coverage 100% (2/2).">&nbsp;894</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1469: Conditional coverage 100% (2/2).">    <span class="keyword">return</span> p != <span class="keyword">null</span>;</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1470</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1471</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1472</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  @Override</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1473</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">public</span> <span class="keyword">boolean</span> hasConstantProp(QualifiedName qname) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1474</td>  <td class="nbHitsCovered">&nbsp;5732</td>  <td class="src"><pre class="src">&nbsp;    checkArgument(qname.isIdentifier());</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1475</td>  <td class="nbHitsCovered">&nbsp;5732</td>  <td class="src"><pre class="src">&nbsp;    Property p = getLeftmostProp(qname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1476</td>  <td class="nbHitsCovered"><a title="Line 1476: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;5732</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1476: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">    <span class="keyword">return</span> p != <span class="keyword">null</span> &amp;&amp; p.isConstant();</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1477</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1478</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1479</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1480</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Unify the two types symmetrically, given that we have already instantiated</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1481</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * the type variables of interest in {@code t1} and {@code t2}, treating</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1482</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * UNKNOWN as a "hole" to be filled.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1483</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * @return The unified type, or null if unification fails</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1484</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1485</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">static</span> ObjectType unifyUnknowns(ObjectType t1, ObjectType t2) {</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1486</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// t1 and/or t2 may be loose in cases where there is a union of loose and</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1487</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// non-loose types, eg, !Array&lt;!Function|string&gt;|!Function.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1488</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// Maybe the equality check below is too strict, we may end up checking for</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1489</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// subtyping, depending on how people use these in code.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1490</td>  <td class="nbHitsCovered"><a title="Line 1490: Conditional coverage 100% (2/2).">&nbsp;58</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1490: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (t1.isLoose()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1491</td>  <td class="nbHitsCovered"><a title="Line 1491: Conditional coverage 100% (2/2).">&nbsp;4</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1491: Conditional coverage 100% (2/2).">      <span class="keyword">return</span> t1.equals(t2) ? t1 : <span class="keyword">null</span>;</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1492</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1493</td>  <td class="nbHitsCovered"><a title="Line 1493: Conditional coverage 100% (2/2).">&nbsp;54</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1493: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (t2.isLoose()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1494</td>  <td class="nbHitsCovered">&nbsp;2</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">null</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1495</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1496</td>  <td class="nbHitsCovered"><a title="Line 1496: Conditional coverage 100% (2/2).">&nbsp;52</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1496: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (!Objects.equals(t1.ns, t2.ns)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1497</td>  <td class="nbHitsCovered">&nbsp;2</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">null</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1498</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1499</td>  <td class="nbHitsUncovered"><a title="Line 1499: Conditional coverage 50% (1/2).">&nbsp;50</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1499: Conditional coverage 50% (1/2).">    <span class="keyword">if</span> (t1.isTopObject()) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1500</td>  <td class="nbHitsUncovered"><a title="Line 1500: Conditional coverage 0% (0/2).">&nbsp;0</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1500: Conditional coverage 0% (0/2).">      <span class="keyword">return</span> t2.isTopObject() ? t1 : <span class="keyword">null</span>;</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1501</td>  <td class="nbHitsUncovered"><a title="Line 1501: Conditional coverage 50% (1/2).">&nbsp;50</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1501: Conditional coverage 50% (1/2).">    } <span class="keyword">else</span> <span class="keyword">if</span> (t2.isTopObject()) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1502</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;      <span class="keyword">return</span> <span class="keyword">null</span>;</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1503</td>  <td class="nbHitsUncovered"><a title="Line 1503: Conditional coverage 50% (1/2).">&nbsp;50</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1503: Conditional coverage 50% (1/2).">    } <span class="keyword">else</span> <span class="keyword">if</span> (t1.isBottomObject()) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1504</td>  <td class="nbHitsUncovered"><a title="Line 1504: Conditional coverage 0% (0/2).">&nbsp;0</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1504: Conditional coverage 0% (0/2).">      <span class="keyword">return</span> t2.isBottomObject() ? t1 : <span class="keyword">null</span>;</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1505</td>  <td class="nbHitsUncovered"><a title="Line 1505: Conditional coverage 50% (1/2).">&nbsp;50</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1505: Conditional coverage 50% (1/2).">    } <span class="keyword">else</span> <span class="keyword">if</span> (t2.isBottomObject()) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1506</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;      <span class="keyword">return</span> <span class="keyword">null</span>;</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1507</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1508</td>  <td class="nbHitsCovered">&nbsp;50</td>  <td class="src"><pre class="src">&nbsp;    NominalType nt = NominalType.unifyUnknowns(t1.nominalType, t2.nominalType);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1509</td>  <td class="nbHitsCovered"><a title="Line 1509: Conditional coverage 100% (2/2).">&nbsp;50</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1509: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (nt == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1510</td>  <td class="nbHitsCovered">&nbsp;10</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">null</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1511</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1512</td>  <td class="nbHitsCovered">&nbsp;40</td>  <td class="src"><pre class="src">&nbsp;    FunctionType newFn = <span class="keyword">null</span>;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1513</td>  <td class="nbHitsUncovered"><a title="Line 1513: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;40</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1513: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">    <span class="keyword">if</span> (t1.fn != <span class="keyword">null</span> || t2.fn != <span class="keyword">null</span>) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1514</td>  <td class="nbHitsCovered">&nbsp;8</td>  <td class="src"><pre class="src">&nbsp;      newFn = FunctionType.unifyUnknowns(t1.fn, t2.fn);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1515</td>  <td class="nbHitsCovered"><a title="Line 1515: Conditional coverage 100% (2/2).">&nbsp;8</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1515: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (newFn == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1516</td>  <td class="nbHitsCovered">&nbsp;4</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">null</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1517</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1518</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1519</td>  <td class="nbHitsCovered">&nbsp;36</td>  <td class="src"><pre class="src">&nbsp;    PersistentMap&lt;String, Property&gt; newProps = PersistentMap.create();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1520</td>  <td class="nbHitsCovered"><a title="Line 1520: Conditional coverage 100% (2/2).">&nbsp;36</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1520: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (String propName : t1.props.keySet()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1521</td>  <td class="nbHitsCovered">&nbsp;18</td>  <td class="src"><pre class="src">&nbsp;      Property prop1 = t1.props.get(propName);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1522</td>  <td class="nbHitsCovered">&nbsp;18</td>  <td class="src"><pre class="src">&nbsp;      Property prop2 = t2.props.get(propName);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1523</td>  <td class="nbHitsCovered"><a title="Line 1523: Conditional coverage 100% (2/2).">&nbsp;18</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1523: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (prop2 == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1524</td>  <td class="nbHitsCovered">&nbsp;1</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">null</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1525</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1526</td>  <td class="nbHitsCovered">&nbsp;17</td>  <td class="src"><pre class="src">&nbsp;      Property p = Property.unifyUnknowns(prop1, prop2);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1527</td>  <td class="nbHitsUncovered"><a title="Line 1527: Conditional coverage 50% (1/2).">&nbsp;17</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1527: Conditional coverage 50% (1/2).">      <span class="keyword">if</span> (p == <span class="keyword">null</span>) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1528</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;        <span class="keyword">return</span> <span class="keyword">null</span>;</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1529</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1530</td>  <td class="nbHitsCovered">&nbsp;17</td>  <td class="src"><pre class="src">&nbsp;      newProps = newProps.with(propName, p);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1531</td>  <td class="nbHitsCovered">&nbsp;17</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1532</td>  <td class="nbHitsCovered">&nbsp;70</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> makeObjectType(t1.commonTypes, nt, newProps, newFn, t1.ns, <span class="keyword">false</span>,</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1533</td>  <td class="nbHitsCovered">&nbsp;35</td>  <td class="src"><pre class="src">&nbsp;        ObjectKind.join(t1.objectKind, t2.objectKind));</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1534</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1535</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1536</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1537</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Unify {@code this}, which may contain free type variables,</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1538</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * with {@code other}, a concrete type, modifying the supplied</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1539</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * {@code typeMultimap} to add any new template variable type bindings.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1540</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * @return Whether unification succeeded</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1541</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1542</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">boolean</span> unifyWithSubtype(ObjectType other, List&lt;String&gt; typeParameters,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1543</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      Multimap&lt;String, JSType&gt; typeMultimap, SubtypeCache subSuperMap) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1544</td>  <td class="nbHitsCovered"><a title="Line 1544: Conditional coverage 100% (2/2).">&nbsp;480</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1544: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (fn != <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1545</td>  <td class="nbHitsUncovered"><a title="Line 1545: Conditional coverage 50% (1/2).">&nbsp;58</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1545: Conditional coverage 50% (1/2).">      <span class="keyword">if</span> (other.fn == <span class="keyword">null</span> ||</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1546</td>  <td class="nbHitsCovered"><a title="Line 1546: Conditional coverage 100% (2/2).">&nbsp;58</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1546: Conditional coverage 100% (2/2).">          !fn.unifyWithSubtype(other.fn, typeParameters, typeMultimap, subSuperMap)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1547</td>  <td class="nbHitsCovered">&nbsp;2</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1548</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1549</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1550</td>  <td class="nbHitsCovered">&nbsp;478</td>  <td class="src"><pre class="src">&nbsp;    NominalType thisNt = <span class="keyword">this</span>.nominalType;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1551</td>  <td class="nbHitsCovered">&nbsp;478</td>  <td class="src"><pre class="src">&nbsp;    NominalType otherNt = other.nominalType;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1552</td>  <td class="nbHitsUncovered"><a title="Line 1552: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;478</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1552: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">    <span class="keyword">if</span> (!thisNt.isBuiltinObject() &amp;&amp; !otherNt.isBuiltinObject()) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1553</td>  <td class="nbHitsCovered"><a title="Line 1553: Conditional coverage 100% (2/2).">&nbsp;472</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1553: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (thisNt.unifyWithSubtype(otherNt, typeParameters, typeMultimap, subSuperMap)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1554</td>  <td class="nbHitsCovered">&nbsp;303</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1555</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1556</td>  <td class="nbHitsCovered"><a title="Line 1556: Conditional coverage 100% (2/2).">&nbsp;169</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1556: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (thisNt.isStructuralInterface()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1557</td>  <td class="nbHitsUncovered"><a title="Line 1557: Conditional coverage 50% (1/2).">&nbsp;5</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1557: Conditional coverage 50% (1/2).">        <span class="keyword">if</span> (thisNt.equals(subSuperMap.get(otherNt))) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1558</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;          <span class="keyword">return</span> <span class="keyword">true</span>;</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1559</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1560</td>  <td class="nbHitsCovered">&nbsp;5</td>  <td class="src"><pre class="src">&nbsp;        subSuperMap = subSuperMap.with(otherNt, thisNt);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1561</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      } <span class="keyword">else</span> { <span class="comment">// class or nominal interface</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1562</td>  <td class="nbHitsCovered">&nbsp;164</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1563</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1564</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1565</td>  <td class="nbHitsUncovered"><a title="Line 1565: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;11</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1565: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">    <span class="keyword">if</span> (!thisNt.isBuiltinObject() &amp;&amp; !thisNt.isStructuralInterface()</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1566</td>  <td class="nbHitsUncovered"><a title="Line 1566: Conditional coverage 0% (0/2).">&nbsp;0</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1566: Conditional coverage 0% (0/2).">        &amp;&amp; otherNt.isBuiltinObject()) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1567</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;      <span class="keyword">return</span> <span class="keyword">false</span>;</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1568</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1569</td>  <td class="nbHitsUncovered"><a title="Line 1569: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;11</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1569: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">    Set&lt;String&gt; thisProps = !thisNt.isBuiltinObject() &amp;&amp; thisNt.isStructuralInterface()</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1570</td>  <td class="nbHitsCovered">&nbsp;5</td>  <td class="src"><pre class="src">&nbsp;        ? thisNt.getPropertyNames() : <span class="keyword">this</span>.props.keySet();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1571</td>  <td class="nbHitsCovered"><a title="Line 1571: Conditional coverage 100% (2/2).">&nbsp;11</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1571: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (thisProps == <span class="keyword">null</span>) {<span class="comment">// Can happen during GTI when types aren't frozen yet.</span></a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1572</td>  <td class="nbHitsCovered">&nbsp;1</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1573</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1574</td>  <td class="nbHitsCovered">&nbsp;10</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> unifyPropsWithSubtype(other, thisProps, typeParameters, typeMultimap, subSuperMap);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1575</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1576</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1577</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">boolean</span> unifyPropsWithSubtype(ObjectType other,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1578</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      Set&lt;String&gt; thisProps, List&lt;String&gt; typeParameters,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1579</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      Multimap&lt;String, JSType&gt; typeMultimap, SubtypeCache subSuperMap) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1580</td>  <td class="nbHitsCovered"><a title="Line 1580: Conditional coverage 100% (2/2).">&nbsp;10</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1580: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (String pname : thisProps) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1581</td>  <td class="nbHitsCovered">&nbsp;24</td>  <td class="src"><pre class="src">&nbsp;      QualifiedName qname = <span class="keyword">new</span> QualifiedName(pname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1582</td>  <td class="nbHitsCovered">&nbsp;24</td>  <td class="src"><pre class="src">&nbsp;      Property thisProp = getLeftmostProp(qname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1583</td>  <td class="nbHitsCovered">&nbsp;24</td>  <td class="src"><pre class="src">&nbsp;      Property otherProp = other.getLeftmostProp(qname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1584</td>  <td class="nbHitsUncovered"><a title="Line 1584: Conditional coverage 50% (1/2).">&nbsp;24</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1584: Conditional coverage 50% (1/2).">      <span class="keyword">if</span> (thisProp.isOptional()) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1585</td>  <td class="nbHitsUncovered"><a title="Line 1585: Conditional coverage 0% (0/2).">&nbsp;0</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1585: Conditional coverage 0% (0/2).">        <span class="keyword">if</span> (otherProp != <span class="keyword">null</span></a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1586</td>  <td class="nbHitsUncovered"><a title="Line 1586: Conditional coverage 0% (0/2).">&nbsp;0</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1586: Conditional coverage 0% (0/2).">            &amp;&amp; !thisProp.getType().unifyWithSubtype(</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1587</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;                otherProp.getType(), typeParameters, typeMultimap, subSuperMap)) {</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1588</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;          <span class="keyword">return</span> <span class="keyword">false</span>;</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1589</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1590</td>  <td class="nbHitsUncovered"><a title="Line 1590: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;24</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1590: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">      } <span class="keyword">else</span> <span class="keyword">if</span> (otherProp == <span class="keyword">null</span> || otherProp.isOptional()</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1591</td>  <td class="nbHitsUncovered"><a title="Line 1591: Conditional coverage 50% (1/2).">&nbsp;44</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1591: Conditional coverage 50% (1/2).">          || !thisProp.getType().unifyWithSubtype(</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1592</td>  <td class="nbHitsCovered">&nbsp;22</td>  <td class="src"><pre class="src">&nbsp;              otherProp.getType(), typeParameters, typeMultimap, subSuperMap)) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1593</td>  <td class="nbHitsCovered">&nbsp;2</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1594</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1595</td>  <td class="nbHitsCovered">&nbsp;22</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1596</td>  <td class="nbHitsCovered">&nbsp;8</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1597</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1598</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1599</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1600</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Takes a map M from type variables to concrete types. For each *free*</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1601</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * type variable in this type, if the type variable is in the domain of</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1602</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * M, then it gets deeply replaced with the corresponding concrete type</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1603</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * in the returned ObjectType.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1604</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1605</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  ObjectType substituteGenerics(Map&lt;String, JSType&gt; typeMap) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1606</td>  <td class="nbHitsUncovered"><a title="Line 1606: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;824261</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1606: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">    <span class="keyword">if</span> (isTopObject() || typeMap.isEmpty()) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1607</td>  <td class="nbHitsCovered">&nbsp;793</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">this</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1608</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1609</td>  <td class="nbHitsCovered">&nbsp;823468</td>  <td class="src"><pre class="src">&nbsp;    PersistentMap&lt;String, Property&gt; newProps = PersistentMap.create();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1610</td>  <td class="nbHitsCovered"><a title="Line 1610: Conditional coverage 100% (2/2).">&nbsp;823468</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1610: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (Map.Entry&lt;String, Property&gt; propsEntry : <span class="keyword">this</span>.props.entrySet()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1611</td>  <td class="nbHitsCovered">&nbsp;645461</td>  <td class="src"><pre class="src">&nbsp;      String pname = propsEntry.getKey();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1612</td>  <td class="nbHitsCovered">&nbsp;645461</td>  <td class="src"><pre class="src">&nbsp;      Property newProp =</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1613</td>  <td class="nbHitsCovered">&nbsp;645461</td>  <td class="src"><pre class="src">&nbsp;          propsEntry.getValue().substituteGenerics(typeMap);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1614</td>  <td class="nbHitsCovered">&nbsp;645461</td>  <td class="src"><pre class="src">&nbsp;      newProps = newProps.with(pname, newProp);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1615</td>  <td class="nbHitsCovered">&nbsp;645461</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1616</td>  <td class="nbHitsCovered"><a title="Line 1616: Conditional coverage 100% (2/2).">&nbsp;823468</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1616: Conditional coverage 100% (2/2).">    FunctionType newFn = fn == <span class="keyword">null</span> ? <span class="keyword">null</span> : fn.substituteGenerics(typeMap);</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1617</td>  <td class="nbHitsCovered">&nbsp;1646936</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> makeObjectType(</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1618</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="keyword">this</span>.commonTypes,</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1619</td>  <td class="nbHitsCovered"><a title="Line 1619: Conditional coverage 100% (2/2).">&nbsp;823468</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1619: Conditional coverage 100% (2/2).">        <span class="keyword">this</span>.nominalType.substituteGenerics(typeMap),</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1620</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        newProps,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1621</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        newFn,</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1622</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="keyword">this</span>.ns,</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1623</td>  <td class="nbHitsCovered"><a title="Line 1623: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;642263</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1623: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">        (newFn != <span class="keyword">null</span> &amp;&amp; newFn.isQmarkFunction()) || isLoose,</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1624</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="keyword">this</span>.objectKind);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1625</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1626</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1627</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1628</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Looks for the given property name (which must be a non-qualified</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1629</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * identifier) on any nominal subtypes. The built-in object type</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1630</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * always returns true.</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1631</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1632</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">boolean</span> isPropDefinedOnSubtype(QualifiedName pname) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1633</td>  <td class="nbHitsCovered">&nbsp;9</td>  <td class="src"><pre class="src">&nbsp;    checkArgument(pname.isIdentifier());</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1634</td>  <td class="nbHitsUncovered"><a title="Line 1634: Conditional coverage 75% (3/4) [each condition: 50%, 100%].">&nbsp;9</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1634: Conditional coverage 75% (3/4) [each condition: 50%, 100%].">    <span class="keyword">return</span> <span class="keyword">this</span>.nominalType.isBuiltinObject() || <span class="keyword">this</span>.nominalType.isPropDefinedOnSubtype(pname);</a></span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1635</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1636</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1637</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="comment">/**</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1638</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   * Returns true if this object refers to the type of an ambiguous object</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1639</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;<span class="comment">   */</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1640</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">boolean</span> isAmbiguousObject() {</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1641</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// TODO(sdh): It's somewhat odd that we treat function namespaces differently</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1642</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// from object namespaces. The reason is for consistency with OTI, which treats</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1643</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// most object literals as anonymous objects, but not so for functions. We</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1644</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// could remove the 'fn' check and simply return true for all namespaces, but</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1645</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// we'll need to update a bunch of expectations in DisambiguatePropertiesTest</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1646</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// (which will then differ from OTI).</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1647</td>  <td class="nbHitsCovered"><a title="Line 1647: Conditional coverage 100% (8/8) [each condition: 100%, 100%, 100%, 100%].">&nbsp;8811</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1647: Conditional coverage 100% (8/8) [each condition: 100%, 100%, 100%, 100%].">    <span class="keyword">if</span> (isEnumObject() || isPrototypeObject() || (<span class="keyword">this</span>.ns != <span class="keyword">null</span> &amp;&amp; <span class="keyword">this</span>.fn != <span class="keyword">null</span>)) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1648</td>  <td class="nbHitsCovered">&nbsp;7999</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1649</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1650</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    NominalType nt;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1651</td>  <td class="nbHitsCovered"><a title="Line 1651: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">&nbsp;812</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1651: Conditional coverage 100% (4/4) [each condition: 100%, 100%].">    <span class="keyword">if</span> (fn != <span class="keyword">null</span> &amp;&amp; fn.isSomeConstructorOrInterface()) {</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1652</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      <span class="comment">// All constructors have "Function" as their nominalType, so look at instance</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1653</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      <span class="comment">// types instead for these cases.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1654</td>  <td class="nbHitsCovered">&nbsp;1</td>  <td class="src"><pre class="src">&nbsp;      ObjectType instance = fn.getInstanceTypeOfCtor().getObjTypeIfSingletonObj();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1655</td>  <td class="nbHitsUncovered"><a title="Line 1655: Conditional coverage 50% (1/2).">&nbsp;1</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1655: Conditional coverage 50% (1/2).">      nt = instance != <span class="keyword">null</span> ? instance.nominalType : getCommonTypes().getObjectType();</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1656</td>  <td class="nbHitsCovered">&nbsp;1</td>  <td class="src"><pre class="src">&nbsp;    } <span class="keyword">else</span> {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1657</td>  <td class="nbHitsCovered">&nbsp;811</td>  <td class="src"><pre class="src">&nbsp;      nt = <span class="keyword">this</span>.nominalType;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1658</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1659</td>  <td class="nbHitsCovered"><a title="Line 1659: Conditional coverage 100% (6/6) [each condition: 100%, 100%, 100%].">&nbsp;812</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1659: Conditional coverage 100% (6/6) [each condition: 100%, 100%, 100%].">    <span class="keyword">return</span> nt.isFunction() || nt.isBuiltinObject() || nt.isLiteralObject();</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1660</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1661</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1662</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  Set&lt;String&gt; getPropertyNames() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1663</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;    Set&lt;String&gt; props = <span class="keyword">new</span> LinkedHashSet&lt;&gt;();</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1664</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;    props.addAll(<span class="keyword">this</span>.props.keySet());</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1665</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;    props.addAll(<span class="keyword">this</span>.nominalType.getPropertyNames());</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1666</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;    <span class="keyword">return</span> props;</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1667</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1668</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1669</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  Iterable&lt;String&gt; getNonInheritedPropertyNames() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1670</td>  <td class="nbHitsUncovered"><a title="Line 1670: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;40</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1670: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">    <span class="keyword">if</span> (<span class="keyword">this</span>.nominalType.isBuiltinObject() || <span class="keyword">this</span>.nominalType.isLiteralObject()) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1671</td>  <td class="nbHitsCovered">&nbsp;37</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">this</span>.props.keySet();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1672</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1673</td>  <td class="nbHitsCovered">&nbsp;3</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> Iterables.concat(<span class="keyword">this</span>.props.keySet(), <span class="keyword">this</span>.nominalType.getAllNonInheritedProps());</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1674</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1675</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1676</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  ObjectType toAnonymousRecord() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1677</td>  <td class="nbHitsUncovered"><a title="Line 1677: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;25</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1677: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">    <span class="keyword">if</span> (<span class="keyword">this</span>.nominalType.isBuiltinObject() || <span class="keyword">this</span>.nominalType.isLiteralObject()) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1678</td>  <td class="nbHitsCovered">&nbsp;22</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">this</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1679</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1680</td>  <td class="nbHitsCovered">&nbsp;3</td>  <td class="src"><pre class="src">&nbsp;    Map&lt;String, Property&gt; propMap = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1681</td>  <td class="nbHitsCovered"><a title="Line 1681: Conditional coverage 100% (2/2).">&nbsp;3</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1681: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (String pname : getNonInheritedPropertyNames()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1682</td>  <td class="nbHitsCovered">&nbsp;4</td>  <td class="src"><pre class="src">&nbsp;      JSType ptype = getProp(<span class="keyword">new</span> QualifiedName(pname));</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1683</td>  <td class="nbHitsCovered">&nbsp;4</td>  <td class="src"><pre class="src">&nbsp;      propMap.put(pname, Property.make(ptype, ptype));</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1684</td>  <td class="nbHitsCovered">&nbsp;4</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1685</td>  <td class="nbHitsCovered">&nbsp;3</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> fromProperties(<span class="keyword">this</span>.commonTypes, propMap);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1686</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1687</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1688</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  Node getDefSite() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1689</td>  <td class="nbHitsUncovered"><a title="Line 1689: Conditional coverage 50% (1/2).">&nbsp;12490</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1689: Conditional coverage 50% (1/2).">    <span class="keyword">if</span> (<span class="keyword">this</span>.ns != <span class="keyword">null</span>) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1690</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;      <span class="keyword">return</span> <span class="keyword">this</span>.ns.getDefSite();</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1691</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1692</td>  <td class="nbHitsUncovered"><a title="Line 1692: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">&nbsp;12490</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1692: Conditional coverage 75% (3/4) [each condition: 100%, 50%].">    <span class="keyword">if</span> (<span class="keyword">this</span>.fn != <span class="keyword">null</span> &amp;&amp; <span class="keyword">this</span>.fn.isSomeConstructorOrInterface()) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1693</td>  <td class="nbHitsCovered">&nbsp;5987</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">this</span>.fn.getInstanceTypeOfCtor().getSource();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1694</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1695</td>  <td class="nbHitsUncovered"><a title="Line 1695: Conditional coverage 50% (1/2).">&nbsp;6503</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1695: Conditional coverage 50% (1/2).">    <span class="keyword">if</span> (<span class="keyword">this</span>.nominalType != <span class="keyword">null</span>) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1696</td>  <td class="nbHitsCovered">&nbsp;6503</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">this</span>.nominalType.getDefSite();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1697</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1698</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;    <span class="keyword">return</span> <span class="keyword">null</span>;</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1699</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1700</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1701</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  JSType getNamespaceType() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1702</td>  <td class="nbHitsCovered">&nbsp;34</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">this</span>.ns.toJSType();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1703</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1704</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1705</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  @Override</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1706</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">public</span> String toString() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1707</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;    <span class="keyword">return</span> appendTo(<span class="keyword">new</span> StringBuilder(), ToStringContext.TO_STRING).toString();</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1708</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1709</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1710</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  String toString(ToStringContext ctx) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1711</td>  <td class="nbHitsCovered">&nbsp;1021</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> appendTo(<span class="keyword">new</span> StringBuilder(), ctx).toString();</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1712</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1713</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1714</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  StringBuilder appendTo(StringBuilder builder, ToStringContext ctx) {</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1715</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// "Foo.prototype" is a valid type when appropriate.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1716</td>  <td class="nbHitsCovered"><a title="Line 1716: Conditional coverage 100% (2/2).">&nbsp;18432</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1716: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (isPrototypeObject()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1717</td>  <td class="nbHitsCovered">&nbsp;3692</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> builder.append(getOwnerFunction().getThisType().getDisplayName()).append(<span class="string">".prototype"</span>);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1718</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1719</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// Annotations need simpler output that can be re-parsed.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1720</td>  <td class="nbHitsCovered"><a title="Line 1720: Conditional coverage 100% (2/2).">&nbsp;14740</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1720: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (ctx.forAnnotation()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1721</td>  <td class="nbHitsCovered"><a title="Line 1721: Conditional coverage 100% (2/2).">&nbsp;39</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1721: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (fn != <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1722</td>  <td class="nbHitsCovered">&nbsp;4</td>  <td class="src"><pre class="src">&nbsp;        fn.appendTo(builder, ctx);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1723</td>  <td class="nbHitsCovered"><a title="Line 1723: Conditional coverage 100% (2/2).">&nbsp;35</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1723: Conditional coverage 100% (2/2).">      } <span class="keyword">else</span> <span class="keyword">if</span> (!props.isEmpty()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1724</td>  <td class="nbHitsCovered">&nbsp;7</td>  <td class="src"><pre class="src">&nbsp;        appendPropsTo(builder, ctx);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1725</td>  <td class="nbHitsUncovered"><a title="Line 1725: Conditional coverage 50% (1/2).">&nbsp;28</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1725: Conditional coverage 50% (1/2).">      } <span class="keyword">else</span> <span class="keyword">if</span> (nominalType.isLiteralObject()) {</a></span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1726</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="comment">// Note: if nominalType.isLiteralObject (e.g. from a non-const namespace)</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1727</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="comment">// then it will append as "Object{}", which is not a valid annotation.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1728</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;        builder.append(<span class="string">"!Object"</span>);</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1729</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      } <span class="keyword">else</span> {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1730</td>  <td class="nbHitsCovered">&nbsp;28</td>  <td class="src"><pre class="src">&nbsp;        nominalType.appendTo(builder, ctx);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1731</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1732</td>  <td class="nbHitsCovered">&nbsp;39</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> builder;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1733</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1734</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// If it's just a simple function or class with no stray fields, return that.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1735</td>  <td class="nbHitsCovered"><a title="Line 1735: Conditional coverage 100% (2/2).">&nbsp;14701</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1735: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (!hasNonPrototypeProperties()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1736</td>  <td class="nbHitsCovered"><a title="Line 1736: Conditional coverage 100% (2/2).">&nbsp;10063</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1736: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (fn != <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1737</td>  <td class="nbHitsCovered">&nbsp;3270</td>  <td class="src"><pre class="src">&nbsp;        <span class="keyword">return</span> fn.appendTo(builder, ctx);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1738</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1739</td>  <td class="nbHitsCovered">&nbsp;6793</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">this</span>.nominalType.appendTo(builder, ctx);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1740</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1741</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    <span class="comment">// More thorough stringification when annotation support is not needed.</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1742</td>  <td class="nbHitsCovered"><a title="Line 1742: Conditional coverage 100% (2/2).">&nbsp;4638</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1742: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (!nominalType.isFunction()</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1743</td>  <td class="nbHitsCovered"><a title="Line 1743: Conditional coverage 100% (2/2).">&nbsp;2015</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1743: Conditional coverage 100% (2/2).">        &amp;&amp; !nominalType.isBuiltinObject()</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1744</td>  <td class="nbHitsCovered"><a title="Line 1744: Conditional coverage 100% (2/2).">&nbsp;1811</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1744: Conditional coverage 100% (2/2).">        &amp;&amp; !nominalType.isLiteralObject()</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1745</td>  <td class="nbHitsCovered"><a title="Line 1745: Conditional coverage 100% (2/2).">&nbsp;37</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1745: Conditional coverage 100% (2/2).">        &amp;&amp; !isNamespace()) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1746</td>  <td class="nbHitsCovered">&nbsp;34</td>  <td class="src"><pre class="src">&nbsp;      nominalType.appendTo(builder, ctx);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1747</td>  <td class="nbHitsUncovered"><a title="Line 1747: Conditional coverage 50% (1/2).">&nbsp;4604</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1747: Conditional coverage 50% (1/2).">    } <span class="keyword">else</span> <span class="keyword">if</span> (isStruct()) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1748</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;      builder.append(<span class="string">"struct"</span>);</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1749</td>  <td class="nbHitsUncovered"><a title="Line 1749: Conditional coverage 50% (1/2).">&nbsp;4604</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1749: Conditional coverage 50% (1/2).">    } <span class="keyword">else</span> <span class="keyword">if</span> (isDict()) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1750</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;      builder.append(<span class="string">"dict"</span>);</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1751</td>  <td class="nbHitsCovered"><a title="Line 1751: Conditional coverage 100% (2/2).">&nbsp;4604</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1751: Conditional coverage 100% (2/2).">    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.ns != <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1752</td>  <td class="nbHitsCovered"><a title="Line 1752: Conditional coverage 100% (6/6) [each condition: 100%, 100%, 100%].">&nbsp;3038</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1752: Conditional coverage 100% (6/6) [each condition: 100%, 100%, 100%].">      <span class="keyword">if</span> (<span class="keyword">this</span>.fn != <span class="keyword">null</span> &amp;&amp; (<span class="keyword">this</span>.fn.isUniqueConstructor() || <span class="keyword">this</span>.fn.isInterfaceDefinition())) {</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1753</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;        <span class="comment">// Add prefix to distinguish a constructor namespace from its instance type</span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1754</td>  <td class="nbHitsCovered">&nbsp;2319</td>  <td class="src"><pre class="src">&nbsp;        builder.append(<span class="string">"class:"</span>);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1755</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1756</td>  <td class="nbHitsCovered">&nbsp;3038</td>  <td class="src"><pre class="src">&nbsp;      builder.append(<span class="keyword">this</span>.ns);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1757</td>  <td class="nbHitsCovered"><a title="Line 1757: Conditional coverage 100% (2/2).">&nbsp;1566</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1757: Conditional coverage 100% (2/2).">    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.fn != <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1758</td>  <td class="nbHitsCovered">&nbsp;8</td>  <td class="src"><pre class="src">&nbsp;      builder.append(<span class="string">"&lt;|"</span>);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1759</td>  <td class="nbHitsCovered">&nbsp;8</td>  <td class="src"><pre class="src">&nbsp;      fn.appendTo(builder, ctx);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1760</td>  <td class="nbHitsCovered">&nbsp;8</td>  <td class="src"><pre class="src">&nbsp;      builder.append(<span class="string">"|&gt;"</span>);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1761</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1762</td>  <td class="nbHitsCovered"><a title="Line 1762: Conditional coverage 100% (2/2).">&nbsp;4638</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1762: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (ns == <span class="keyword">null</span>) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1763</td>  <td class="nbHitsCovered">&nbsp;1600</td>  <td class="src"><pre class="src">&nbsp;      appendPropsTo(builder, ctx);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1764</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1765</td>  <td class="nbHitsCovered"><a title="Line 1765: Conditional coverage 100% (2/2).">&nbsp;4638</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1765: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (isLoose) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1766</td>  <td class="nbHitsCovered">&nbsp;64</td>  <td class="src"><pre class="src">&nbsp;      builder.append(<span class="string">" (loose)"</span>);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1767</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1768</td>  <td class="nbHitsCovered">&nbsp;4638</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> builder;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1769</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1770</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1771</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">private</span> <span class="keyword">void</span> appendPropsTo(StringBuilder builder, ToStringContext ctx) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1772</td>  <td class="nbHitsCovered">&nbsp;1607</td>  <td class="src"><pre class="src">&nbsp;    builder.append(<span class="string">'{'</span>);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1773</td>  <td class="nbHitsCovered">&nbsp;1607</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">boolean</span> firstIteration = <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1774</td>  <td class="nbHitsCovered"><a title="Line 1774: Conditional coverage 100% (2/2).">&nbsp;1607</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1774: Conditional coverage 100% (2/2).">    <span class="keyword">for</span> (String pname : <span class="keyword">new</span> TreeSet&lt;&gt;(props.keySet())) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1775</td>  <td class="nbHitsCovered"><a title="Line 1775: Conditional coverage 100% (2/2).">&nbsp;2574</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1775: Conditional coverage 100% (2/2).">      <span class="keyword">if</span> (firstIteration) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1776</td>  <td class="nbHitsCovered">&nbsp;1607</td>  <td class="src"><pre class="src">&nbsp;        firstIteration = <span class="keyword">false</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1777</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      } <span class="keyword">else</span> {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1778</td>  <td class="nbHitsCovered">&nbsp;967</td>  <td class="src"><pre class="src">&nbsp;        builder.append(<span class="string">", "</span>);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1779</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;      }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1780</td>  <td class="nbHitsCovered">&nbsp;2574</td>  <td class="src"><pre class="src">&nbsp;      builder.append(pname);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1781</td>  <td class="nbHitsCovered">&nbsp;2574</td>  <td class="src"><pre class="src">&nbsp;      builder.append(<span class="string">": "</span>);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1782</td>  <td class="nbHitsCovered">&nbsp;2574</td>  <td class="src"><pre class="src">&nbsp;      props.get(pname).appendTo(builder, ctx);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1783</td>  <td class="nbHitsCovered">&nbsp;2574</td>  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1784</td>  <td class="nbHitsCovered">&nbsp;1607</td>  <td class="src"><pre class="src">&nbsp;    builder.append(<span class="string">'}'</span>);</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1785</td>  <td class="nbHitsCovered">&nbsp;1607</td>  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1786</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1787</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  @Override</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1788</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">public</span> <span class="keyword">boolean</span> equals(Object o) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1789</td>  <td class="nbHitsUncovered"><a title="Line 1789: Conditional coverage 50% (1/2).">&nbsp;557408</a></td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;<a title="Line 1789: Conditional coverage 50% (1/2).">    <span class="keyword">if</span> (!(o <span class="keyword">instanceof</span> ObjectType)) {</a></span></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1790</td>  <td class="nbHitsUncovered">&nbsp;0</td>  <td class="src"><pre class="src"><span class="srcUncovered">&nbsp;      <span class="keyword">return</span> <span class="keyword">false</span>;</span></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1791</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1792</td>  <td class="nbHitsCovered"><a title="Line 1792: Conditional coverage 100% (2/2).">&nbsp;557408</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1792: Conditional coverage 100% (2/2).">    <span class="keyword">if</span> (<span class="keyword">this</span> == o) {</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1793</td>  <td class="nbHitsCovered">&nbsp;62348</td>  <td class="src"><pre class="src">&nbsp;      <span class="keyword">return</span> <span class="keyword">true</span>;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1794</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;    }</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1795</td>  <td class="nbHitsCovered">&nbsp;495060</td>  <td class="src"><pre class="src">&nbsp;    ObjectType other = (ObjectType) o;</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1796</td>  <td class="nbHitsCovered"><a title="Line 1796: Conditional coverage 100% (2/2).">&nbsp;990120</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1796: Conditional coverage 100% (2/2).">    <span class="keyword">return</span> Objects.equals(<span class="keyword">this</span>.fn, other.fn)</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1797</td>  <td class="nbHitsCovered"><a title="Line 1797: Conditional coverage 100% (2/2).">&nbsp;394805</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1797: Conditional coverage 100% (2/2).">        &amp;&amp; Objects.equals(<span class="keyword">this</span>.ns, other.ns)</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1798</td>  <td class="nbHitsCovered"><a title="Line 1798: Conditional coverage 100% (2/2).">&nbsp;390797</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1798: Conditional coverage 100% (2/2).">        &amp;&amp; Objects.equals(<span class="keyword">this</span>.nominalType, other.nominalType)</a></pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1799</td>  <td class="nbHitsCovered"><a title="Line 1799: Conditional coverage 100% (2/2).">&nbsp;322851</a></td>  <td class="src"><pre class="src">&nbsp;<a title="Line 1799: Conditional coverage 100% (2/2).">        &amp;&amp; Objects.equals(<span class="keyword">this</span>.props, other.props);</a></pre></td></tr>
<tr>  <td class="numLine">&nbsp;1800</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1801</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1802</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  @Override</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1803</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">public</span> <span class="keyword">int</span> hashCode() {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1804</td>  <td class="nbHitsCovered">&nbsp;330313</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> Objects.hash(<span class="keyword">this</span>.fn, <span class="keyword">this</span>.ns, <span class="keyword">this</span>.props, <span class="keyword">this</span>.nominalType);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1805</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1806</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1807</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  @Override</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1808</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  <span class="keyword">public</span> Collection&lt;JSType&gt; getSubtypesWithProperty(QualifiedName qname) {</pre></td></tr>
<tr>  <td class="numLineCover">&nbsp;1809</td>  <td class="nbHitsCovered">&nbsp;8</td>  <td class="src"><pre class="src">&nbsp;    <span class="keyword">return</span> <span class="keyword">this</span>.nominalType.getSubtypesWithProperty(qname);</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1810</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;  }</pre></td></tr>
<tr>  <td class="numLine">&nbsp;1811</td>  <td class="nbHits">&nbsp;</td>
  <td class="src"><pre class="src">&nbsp;}</pre></td></tr>
</table>

<div class="footer">Report generated by <a href="http://cobertura.sourceforge.net/" target="_top">Cobertura</a> 2.1.1 on 1/31/18 12:21 PM.</div>
</body>
</html>
